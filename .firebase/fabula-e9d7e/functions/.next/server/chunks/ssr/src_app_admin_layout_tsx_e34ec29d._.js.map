{"version":3,"sources":["../../../../src/hooks/useAdmin.ts","../../../../src/app/admin/layout.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\nexport function useAdmin() {\r\n    const { user } = useAuth();\r\n    const [isAdmin, setIsAdmin] = useState<boolean>(false);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n\r\n    useEffect(() => {\r\n        async function checkAdminStatus() {\r\n            if (!user) {\r\n                setIsAdmin(false);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // Force token refresh to get the latest claims\r\n                const idTokenResult = await user.getIdTokenResult(true);\r\n                setIsAdmin(!!idTokenResult.claims.admin);\r\n            } catch (error) {\r\n                console.error('Error checking admin status:', error);\r\n                setIsAdmin(false);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        checkAdminStatus();\r\n    }, [user]);\r\n\r\n    return { isAdmin, loading };\r\n}\r\n","'use client';\r\n\r\nimport { useAdmin } from '@/hooks/useAdmin';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect } from 'react';\r\nimport Link from 'next/link';\r\n\r\nexport default function AdminLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const { isAdmin, loading } = useAdmin();\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        if (!loading && !isAdmin) {\r\n            router.push('/');\r\n        }\r\n    }, [isAdmin, loading, router]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen\">\r\n                <div className=\"spinner\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!isAdmin) {\r\n        return null; // Will redirect\r\n    }\r\n\r\n    return (\r\n        <div className=\"admin-layout flex min-h-screen bg-gray-100 dark:bg-gray-900\">\r\n            {/* Sidebar */}\r\n            <aside className=\"w-64 bg-white dark:bg-gray-800 shadow-md flex-shrink-0 hidden md:block\">\r\n                <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\r\n                    <h2 className=\"text-xl font-bold text-indigo-600 dark:text-indigo-400\">Admin Paneli</h2>\r\n                </div>\r\n                <nav className=\"p-4 space-y-2\">\r\n                    <Link href=\"/admin\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üìä Genel Bakƒ±≈ü\r\n                    </Link>\r\n                    <Link href=\"/admin/stories\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üìö Hikayeler\r\n                    </Link>\r\n                    <Link href=\"/admin/users\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üë• Kullanƒ±cƒ±lar\r\n                    </Link>\r\n                    <Link href=\"/admin/reports\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üö© Raporlar\r\n                    </Link>\r\n                    <div className=\"border-t border-gray-200 dark:border-gray-700 my-4\"></div>\r\n                    <Link href=\"/\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        ‚¨ÖÔ∏è Uygulamaya D√∂n\r\n                    </Link>\r\n                </nav>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 p-8 overflow-y-auto\">\r\n                {children}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"wDAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCEA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,EAAY,CAChC,UAAQ,CAGX,EACG,GAAM,SAAE,CAAO,CAAE,SAAO,CAAE,CDTvB,ACS0B,SDTjB,EACZ,GAAM,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClB,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAU,GAC1C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAU,GAyBhD,MAvBA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MACN,AAmBA,eAnBe,EACX,GAAI,CAAC,EAAM,CACP,GAAW,GACX,GAAW,GACX,MACJ,CAEA,GAAI,CAEA,IAAM,EAAgB,MAAM,EAAK,gBAAgB,EAAC,GAClD,EAAW,CAAC,CAAC,EAAc,MAAM,CAAC,KAAK,CAC3C,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,+BAAgC,GAC9C,GAAW,EACf,QAAU,CACN,GAAW,EACf,CACJ,GAGJ,EAAG,CAAC,EAAK,EAEF,SAAE,UAAS,CAAQ,CAC9B,ICnBU,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,UAQxB,CANA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACF,AAAC,GAAY,GACb,EAAO,GADK,CAAU,AACX,CAAC,IAEpB,EAAG,CAAC,EAAS,EAAS,EAAO,EAEzB,GAEI,CAAA,EAAA,EAAA,CAFK,EAEL,EAAC,MAAA,CAAI,UAAU,yDACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,cAKtB,EAKD,CAAA,EAAA,EAAA,EALU,EAKV,EAAC,MAAA,CAAI,UAAU,wEAEX,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,mFACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6DACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kEAAyD,mBAE3E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,SAAS,UAAU,gHAAuG,mBAGrI,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,iBAAiB,UAAU,gHAAuG,iBAG7I,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,eAAe,UAAU,gHAAuG,oBAG3I,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,iBAAiB,UAAU,gHAAuG,gBAG7I,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,IAAI,UAAU,gHAAuG,4BAOxI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sCACX,OAhCF,IAoCf,EApCqB,gBAAgB"}