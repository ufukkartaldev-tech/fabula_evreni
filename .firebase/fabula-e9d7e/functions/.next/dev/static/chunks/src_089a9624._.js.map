{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/hooks/useAdmin.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\nexport function useAdmin() {\r\n    const { user } = useAuth();\r\n    const [isAdmin, setIsAdmin] = useState<boolean>(false);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n\r\n    useEffect(() => {\r\n        async function checkAdminStatus() {\r\n            if (!user) {\r\n                setIsAdmin(false);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // Force token refresh to get the latest claims\r\n                const idTokenResult = await user.getIdTokenResult(true);\r\n                setIsAdmin(!!idTokenResult.claims.admin);\r\n            } catch (error) {\r\n                console.error('Error checking admin status:', error);\r\n                setIsAdmin(false);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        checkAdminStatus();\r\n    }, [user]);\r\n\r\n    return { isAdmin, loading };\r\n}\r\n"],"names":["useEffect","useState","useAuth","useAdmin","user","isAdmin","setIsAdmin","loading","setLoading","checkAdminStatus","idTokenResult","getIdTokenResult","claims","admin","error","console"],"mappings":";;;;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,OAAO,QAAQ,wBAAwB;;;;AAEzC;;IACH,MAAM,EAAEE,IAAAA,EAAM;IACd,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,OAAGL,yKAAQ,CAAC,CAAS,KAAK,CAAP,AAAQ,CAAP;IAC/C,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,OAAGP,yKAAQ,CAAC,CAAS,IAAI,CAAC,CAAP,CAAC;QAE/CD,0KAAS;8BAAC,MAAM;YACZ,eAAeS,gBAAgBA,CAAA,EAAG;gBAC9B,IAAI,CAACL,IAAI,EAAE;oBACPE,UAAU,CAAC,KAAK,CAAC;oBACjBE,UAAU,CAAC,KAAK,CAAC;oBACjB;gBACJ;gBAEA,IAAI;oBACA,+CAAA;oBACA,MAAME,aAAa,GAAG,MAAMN,IAAI,CAACO,gBAAgB,CAAC,IAAI,CAAC;oBACvDL,UAAU,CAAC,CAAC,CAACI,aAAa,CAACE,MAAM,CAACC,KAAK,CAAC;gBAC5C,CAAC,CAAC,OAAOC,KAAK,EAAE;oBACZC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;oBACpDR,UAAU,CAAC,KAAK,CAAC;gBACrB,CAAC,QAAS;oBACNE,UAAU,CAAC,KAAK,CAAC;gBACrB;YACJ;YAEAC,gBAAgB,CAAC,CAAC;QACtB,CAAC;6BAAE;QAACL,IAAI;KAAC,CAAC;IAEV,OAAO;QAAEC,OAAO;QAAEE;IAAQ,CAAC;AAC/B;GA7BgBJ,QAAQA,CAAA,EAAG;;QACND,6IAAO,CAAC,CAAC","ignoreList":[]}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/app/admin/layout.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useAdmin } from '@/hooks/useAdmin';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect } from 'react';\r\nimport Link from 'next/link';\r\n\r\nexport default function AdminLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const { isAdmin, loading } = useAdmin();\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        if (!loading && !isAdmin) {\r\n            router.push('/');\r\n        }\r\n    }, [isAdmin, loading, router]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen\">\r\n                <div className=\"spinner\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!isAdmin) {\r\n        return null; // Will redirect\r\n    }\r\n\r\n    return (\r\n        <div className=\"admin-layout flex min-h-screen bg-gray-100 dark:bg-gray-900\">\r\n            {/* Sidebar */}\r\n            <aside className=\"w-64 bg-white dark:bg-gray-800 shadow-md flex-shrink-0 hidden md:block\">\r\n                <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\r\n                    <h2 className=\"text-xl font-bold text-indigo-600 dark:text-indigo-400\">Admin Paneli</h2>\r\n                </div>\r\n                <nav className=\"p-4 space-y-2\">\r\n                    <Link href=\"/admin\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üìä Genel Bakƒ±≈ü\r\n                    </Link>\r\n                    <Link href=\"/admin/stories\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üìö Hikayeler\r\n                    </Link>\r\n                    <Link href=\"/admin/users\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üë• Kullanƒ±cƒ±lar\r\n                    </Link>\r\n                    <Link href=\"/admin/reports\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üö© Raporlar\r\n                    </Link>\r\n                    <div className=\"border-t border-gray-200 dark:border-gray-700 my-4\"></div>\r\n                    <Link href=\"/\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        ‚¨ÖÔ∏è Uygulamaya D√∂n\r\n                    </Link>\r\n                </nav>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 p-8 overflow-y-auto\">\r\n                {children}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["c","_c","useAdmin","useRouter","useEffect","Link","AdminLayout","t0","$","$i","Symbol","for","children","isAdmin","loading","router","t1","t2","AdminLayout[useEffect()]","push","t3","t4","t5"],"mappings":"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","ignoreList":[]}}]
}