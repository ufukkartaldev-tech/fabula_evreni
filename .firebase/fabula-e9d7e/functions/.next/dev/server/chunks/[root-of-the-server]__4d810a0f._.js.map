{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/lib/firebaseAdmin.ts"],"sourcesContent":["import 'server-only';\r\nimport * as admin from 'firebase-admin';\r\n\r\nif (!admin.apps.length) {\r\n    try {\r\n        admin.initializeApp({\r\n            credential: admin.credential.applicationDefault(),\r\n        });\r\n        console.log('Firebase Admin initialized with default credentials');\r\n    } catch (error) {\r\n        console.warn('Firebase Admin initialization failed. Make sure GOOGLE_APPLICATION_CREDENTIALS is set or you are running in a supported environment.', error);\r\n    }\r\n}\r\n\r\nexport const adminDb = admin.firestore();\r\nexport const adminAuth = admin.auth();\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,IAAI,CAAC,mIAAU,CAAC,MAAM,EAAE;IACpB,IAAI;QACA,4IAAmB,CAAC;YAChB,YAAY,yIAAgB,CAAC,kBAAkB;QACnD;QACA,QAAQ,GAAG,CAAC;IAChB,EAAE,OAAO,OAAO;QACZ,QAAQ,IAAI,CAAC,wIAAwI;IACzJ;AACJ;AAEO,MAAM,UAAU,wIAAe;AAC/B,MAAM,YAAY,mIAAU"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/app/api/admin/set-custom-claims/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { adminAuth } from '@/lib/firebaseAdmin';\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const { uid, action, secret } = await request.json();\r\n\r\n        // Simple security check for bootstrapping\r\n        // In production, this should be a strong secret environment variable\r\n        if (secret !== 'fabula-admin-bootstrap-2024') {\r\n            return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n        }\r\n\r\n        if (!uid) {\r\n            return NextResponse.json({ error: 'UID is required' }, { status: 400 });\r\n        }\r\n\r\n        if (action === 'grant') {\r\n            await adminAuth.setCustomUserClaims(uid, { admin: true });\r\n            return NextResponse.json({ success: true, message: `Admin privileges granted to ${uid}` });\r\n        } else if (action === 'revoke') {\r\n            await adminAuth.setCustomUserClaims(uid, { admin: false });\r\n            return NextResponse.json({ success: true, message: `Admin privileges revoked from ${uid}` });\r\n        }\r\n\r\n        return NextResponse.json({ error: 'Invalid action' }, { status: 400 });\r\n\r\n    } catch (error) {\r\n        console.error('Error setting custom claims:', error);\r\n        return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,QAAQ,IAAI;QAElD,0CAA0C;QAC1C,qEAAqE;QACrE,IAAI,WAAW,+BAA+B;YAC1C,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,IAAI,CAAC,KAAK;YACN,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkB,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,IAAI,WAAW,SAAS;YACpB,MAAM,0IAAS,CAAC,mBAAmB,CAAC,KAAK;gBAAE,OAAO;YAAK;YACvD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM,SAAS,CAAC,4BAA4B,EAAE,KAAK;YAAC;QAC5F,OAAO,IAAI,WAAW,UAAU;YAC5B,MAAM,0IAAS,CAAC,mBAAmB,CAAC,KAAK;gBAAE,OAAO;YAAM;YACxD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM,SAAS,CAAC,8BAA8B,EAAE,KAAK;YAAC;QAC9F;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IAExE,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ"}}]
}