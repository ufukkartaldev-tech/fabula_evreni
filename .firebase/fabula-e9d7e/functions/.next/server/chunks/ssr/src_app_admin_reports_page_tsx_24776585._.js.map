{"version":3,"sources":["../../../../src/app/admin/reports/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { Report, ReportStatus } from '@/interfaces/Report';\r\nimport Link from 'next/link';\r\n\r\nexport default function AdminReportsPage() {\r\n    const { user } = useAuth();\r\n    const [reports, setReports] = useState<Report[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [updatingId, setUpdatingId] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        fetchReports();\r\n    }, [user]);\r\n\r\n    const fetchReports = async () => {\r\n        if (!user) return;\r\n        try {\r\n            const token = await user.getIdToken();\r\n            const response = await fetch('/api/admin/reports', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n            const data = await response.json();\r\n            if (data.reports) {\r\n                setReports(data.reports);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching reports:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleUpdateStatus = async (id: string, status: ReportStatus) => {\r\n        if (!user) return;\r\n\r\n        setUpdatingId(id);\r\n        try {\r\n            const token = await user.getIdToken();\r\n            const response = await fetch(`/api/admin/reports/${id}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({ status })\r\n            });\r\n\r\n            if (response.ok) {\r\n                setReports(reports.map(r => r.id === id ? { ...r, status } : r));\r\n            } else {\r\n                alert('G√ºncelleme ba≈üarƒ±sƒ±z oldu.');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating report:', error);\r\n            alert('Bir hata olu≈ütu.');\r\n        } finally {\r\n            setUpdatingId(null);\r\n        }\r\n    };\r\n\r\n    const getStatusBadge = (status: ReportStatus) => {\r\n        switch (status) {\r\n            case 'pending':\r\n                return <span className=\"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium\">Bekliyor</span>;\r\n            case 'resolved':\r\n                return <span className=\"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium\">√á√∂z√ºld√º</span>;\r\n            case 'dismissed':\r\n                return <span className=\"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium\">Reddedildi</span>;\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"p-8 text-center\">Y√ºkleniyor...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"admin-reports-page\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h1 className=\"text-2xl font-bold text-gray-800 dark:text-white\">Rapor Y√∂netimi</h1>\r\n                <button\r\n                    onClick={fetchReports}\r\n                    className=\"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\r\n                >\r\n                    üîÑ Yenile\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-left\">\r\n                        <thead className=\"bg-gray-50 dark:bg-gray-700/50\">\r\n                            <tr>\r\n                                <th className=\"p-4 font-medium text-gray-500 dark:text-gray-400\">Durum</th>\r\n                                <th className=\"p-4 font-medium text-gray-500 dark:text-gray-400\">Sebep</th>\r\n                                <th className=\"p-4 font-medium text-gray-500 dark:text-gray-400\">Hedef</th>\r\n                                <th className=\"p-4 font-medium text-gray-500 dark:text-gray-400\">Raporlayan</th>\r\n                                <th className=\"p-4 font-medium text-gray-500 dark:text-gray-400\">Tarih</th>\r\n                                <th className=\"p-4 font-medium text-gray-500 dark:text-gray-400 text-right\">ƒ∞≈ülemler</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-100 dark:divide-gray-700\">\r\n                            {reports.map((report) => (\r\n                                <tr key={report.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors\">\r\n                                    <td className=\"p-4\">\r\n                                        {getStatusBadge(report.status)}\r\n                                    </td>\r\n                                    <td className=\"p-4\">\r\n                                        <div className=\"font-medium\">{report.reason}</div>\r\n                                        <div className=\"text-sm text-gray-500 truncate max-w-xs\" title={report.description}>\r\n                                            {report.description}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"p-4\">\r\n                                        <div className=\"text-sm\">\r\n                                            <span className=\"font-bold uppercase text-xs text-gray-400 mr-2\">{report.targetType}</span>\r\n                                            {report.targetType === 'story' && (\r\n                                                <Link href={`/story/${report.targetId}`} target=\"_blank\" className=\"text-indigo-600 hover:underline\">\r\n                                                    G√∂r√ºnt√ºle\r\n                                                </Link>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"text-sm text-gray-500 italic truncate max-w-xs\">\r\n                                            \"{report.targetContent}\"\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"p-4 text-sm\">\r\n                                        {report.reporterName}\r\n                                    </td>\r\n                                    <td className=\"p-4 text-sm text-gray-500\">\r\n                                        {new Date(report.createdAt as any).toLocaleDateString('tr-TR')}\r\n                                    </td>\r\n                                    <td className=\"p-4 text-right\">\r\n                                        <div className=\"flex justify-end gap-2\">\r\n                                            {report.status === 'pending' && (\r\n                                                <>\r\n                                                    <button\r\n                                                        onClick={() => handleUpdateStatus(report.id, 'resolved')}\r\n                                                        disabled={updatingId === report.id}\r\n                                                        className=\"text-green-600 hover:bg-green-50 px-2 py-1 rounded text-sm disabled:opacity-50\"\r\n                                                    >\r\n                                                        ‚úÖ √á√∂z\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => handleUpdateStatus(report.id, 'dismissed')}\r\n                                                        disabled={updatingId === report.id}\r\n                                                        className=\"text-gray-600 hover:bg-gray-100 px-2 py-1 rounded text-sm disabled:opacity-50\"\r\n                                                    >\r\n                                                        ‚ùå Reddet\r\n                                                    </button>\r\n                                                </>\r\n                                            )}\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                {reports.length === 0 && (\r\n                    <div className=\"p-8 text-center text-gray-500\">\r\n                        Harika! Bekleyen rapor yok. üéâ\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}