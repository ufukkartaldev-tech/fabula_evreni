module.exports=[9453,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,c.createContext)(void 0);function e({children:a}){let[e,f]=(0,c.useState)("light"),[g,h]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{h(!0);let a=localStorage.getItem("fabula-theme");a?f(a):f(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,c.useEffect)(()=>{g&&(document.documentElement.setAttribute("data-theme",e),localStorage.setItem("fabula-theme",e))},[e,g]),g)?(0,b.jsx)(d.Provider,{value:{theme:e,toggleTheme:()=>{f(a=>"light"===a?"dark":"light")}},children:a}):(0,b.jsx)(b.Fragment,{children:a})}function f(){return(0,c.useContext)(d)||null}a.s(["ThemeProvider",()=>e,"useTheme",()=>f])},8226,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(11642),f=a.i(10123);function g({badge:a,size:c="small",showName:d=!1,showTooltip:e=!0}){return(0,b.jsxs)("div",{className:`badge ${{small:"badge-small",medium:"badge-medium",large:"badge-large"}[c]}`,title:e?`${a.name} - ${a.description}`:void 0,children:[(0,b.jsx)("span",{className:"badge-emoji",children:a.emoji}),d&&(0,b.jsx)("span",{className:"badge-name",children:a.name})]})}function h(){let{user:a,userProfile:h,signOut:i}=(0,e.useAuth)(),[j,k]=(0,c.useState)(!1),l=(0,c.useRef)(null);(0,c.useEffect)(()=>{function a(a){l.current&&!l.current.contains(a.target)&&k(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let m=async()=>{try{await i(),k(!1)}catch(a){console.error("Sign out error:",a)}};if(!a)return null;let n=a.displayName||"KullanÄ±cÄ±",o=a.photoURL||"ðŸ‘¤",p=h&&h.xp||0,q=h?(0,f.getUserBadge)(p):null,r=h?(0,f.getXPToNextBadge)(p):null;return(0,b.jsxs)("div",{className:"user-menu",ref:l,children:[(0,b.jsxs)("button",{className:"user-menu-button",onClick:()=>k(!j),children:[a.photoURL?(0,b.jsx)("img",{src:o,alt:n,className:"user-avatar-img"}):(0,b.jsx)("span",{className:"user-avatar-emoji",children:o}),(0,b.jsx)("span",{className:"user-name",children:n}),q&&(0,b.jsx)("span",{className:"user-badge-icon",children:q.emoji}),(0,b.jsx)("span",{className:`dropdown-arrow ${j?"open":""}`,children:"â–¼"})]}),j&&(0,b.jsxs)("div",{className:"user-menu-dropdown",children:[(0,b.jsxs)("div",{className:"user-menu-header",children:[(0,b.jsxs)("div",{className:"user-menu-info",children:[(0,b.jsx)("strong",{children:n}),(0,b.jsx)("small",{children:a.email})]}),q&&h&&(0,b.jsxs)("div",{className:"user-menu-badge",children:[(0,b.jsx)(g,{badge:q,size:"medium",showName:!0}),(0,b.jsxs)("div",{className:"user-stats",children:[(0,b.jsxs)("span",{className:"stat-item",children:[(0,b.jsx)("span",{className:"stat-icon",children:"âœ¨"}),p," XP"]}),r&&r.nextBadge&&(0,b.jsxs)("span",{className:"stat-item next-badge",children:[(0,b.jsx)("span",{className:"stat-icon",children:"â­"}),r.remainingXP," XP sonraki rozete"]})]})]})]}),(0,b.jsx)("div",{className:"user-menu-divider"}),(0,b.jsxs)(d.default,{href:"/profile",className:"user-menu-item",onClick:()=>k(!1),children:[(0,b.jsx)("span",{children:"ðŸ‘¤"}),"Profilim"]}),(0,b.jsxs)(d.default,{href:"/my-stories",className:"user-menu-item",onClick:()=>k(!1),children:[(0,b.jsx)("span",{children:"ðŸ“š"}),"Hikayelerim"]}),(0,b.jsxs)(d.default,{href:"/favorites",className:"user-menu-item",onClick:()=>k(!1),children:[(0,b.jsx)("span",{children:"â­"}),"Favorilerim"]}),(0,b.jsxs)(d.default,{href:"/collections",className:"user-menu-item",onClick:()=>k(!1),children:[(0,b.jsx)("span",{children:"ðŸ“‚"}),"Okuma Listelerim"]}),(0,b.jsxs)(d.default,{href:"/settings",className:"user-menu-item",onClick:()=>k(!1),children:[(0,b.jsx)("span",{children:"âš™ï¸"}),"Ayarlar"]}),(0,b.jsx)("div",{className:"user-menu-divider"}),(0,b.jsxs)("button",{className:"user-menu-item logout",onClick:m,children:[(0,b.jsx)("span",{children:"ðŸšª"}),"Ã‡Ä±kÄ±ÅŸ Yap"]})]})]})}function i({isOpen:a,onClose:d}){let[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),{signInWithGoogle:z,signInWithEmail:A,signUpWithEmail:B,resetPassword:C}=(0,e.useAuth)();if(!a)return null;let D=async()=>{u(!0),s("");try{await z(n),d()}catch(a){s(a.message)}finally{u(!1)}},E=async a=>{a.preventDefault(),u(!0),s("");try{if(f)await A(h,j,n);else{if(!l.trim()){s("LÃ¼tfen adÄ±nÄ±zÄ± girin."),u(!1);return}await B(h,j,l,n)}d(),G()}catch(a){s(a.message)}finally{u(!1)}},F=async a=>{a.preventDefault(),u(!0),s("");try{await C(h),w(!0),setTimeout(()=>{y(!1),w(!1)},3e3)}catch(a){s(a.message)}finally{u(!1)}},G=()=>{i(""),k(""),m(""),s(""),q(!1),w(!1),y(!1)};return(0,b.jsx)("div",{className:"modal-overlay",onClick:d,children:(0,b.jsxs)("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{className:"modal-close",onClick:d,children:"âœ•"}),x?(0,b.jsxs)("div",{className:"auth-container",children:[(0,b.jsx)("h2",{className:"auth-title",children:"Åžifre SÄ±fÄ±rlama"}),(0,b.jsx)("p",{className:"auth-subtitle",children:"Email adresinize ÅŸifre sÄ±fÄ±rlama baÄŸlantÄ±sÄ± gÃ¶ndereceÄŸiz."}),v?(0,b.jsx)("div",{className:"success-message",children:"âœ… Åžifre sÄ±fÄ±rlama emaili gÃ¶nderildi! Email kutunuzu kontrol edin."}):(0,b.jsxs)("form",{onSubmit:F,className:"auth-form",children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"Email"}),(0,b.jsx)("input",{type:"email",value:h,onChange:a=>i(a.target.value),placeholder:"ornek@email.com",required:!0,disabled:t})]}),r&&(0,b.jsx)("div",{className:"error-message",children:r}),(0,b.jsx)("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"GÃ¶nderiliyor...":"Åžifre SÄ±fÄ±rlama Linki GÃ¶nder"}),(0,b.jsx)("button",{type:"button",className:"text-button",onClick:()=>y(!1),children:"â† Geri DÃ¶n"})]})]}):(0,b.jsxs)("div",{className:"auth-container",children:[(0,b.jsx)("h2",{className:"auth-title",children:f?"GiriÅŸ Yap":"KayÄ±t Ol"}),(0,b.jsx)("p",{className:"auth-subtitle",children:f?"Hikayelerinize devam etmek iÃ§in giriÅŸ yapÄ±n":"Yeni bir hesap oluÅŸturun ve hikayelere katÄ±lÄ±n"}),(0,b.jsxs)("button",{className:"google-button",onClick:D,disabled:t,children:[(0,b.jsx)("span",{className:"google-icon",children:"ðŸ”µ"}),"Google ile ",f?"GiriÅŸ Yap":"KayÄ±t Ol"]}),(0,b.jsx)("div",{className:"divider",children:(0,b.jsx)("span",{children:"veya"})}),(0,b.jsxs)("form",{onSubmit:E,className:"auth-form",children:[!f&&(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"AdÄ±nÄ±z"}),(0,b.jsx)("input",{type:"text",value:l,onChange:a=>m(a.target.value),placeholder:"AdÄ±nÄ±z SoyadÄ±nÄ±z",required:!f,disabled:t})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"Email"}),(0,b.jsx)("input",{type:"email",value:h,onChange:a=>i(a.target.value),placeholder:"ornek@email.com",required:!0,disabled:t})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"Åžifre"}),(0,b.jsxs)("div",{className:"password-input",children:[(0,b.jsx)("input",{type:p?"text":"password",value:j,onChange:a=>k(a.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,minLength:6,disabled:t}),(0,b.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>q(!p),children:p?"ðŸ‘ï¸":"ðŸ‘ï¸â€ðŸ—¨ï¸"})]}),!f&&(0,b.jsx)("small",{className:"form-hint",children:"En az 6 karakter olmalÄ±"})]}),(0,b.jsxs)("div",{className:"form-options",children:[(0,b.jsxs)("label",{className:"checkbox-label",children:[(0,b.jsx)("input",{type:"checkbox",checked:n,onChange:a=>o(a.target.checked),disabled:t}),(0,b.jsx)("span",{children:"Beni HatÄ±rla (30 gÃ¼n)"})]}),f&&(0,b.jsx)("button",{type:"button",className:"text-button",onClick:()=>y(!0),children:"Åžifremi Unuttum"})]}),r&&(0,b.jsx)("div",{className:"error-message",children:r}),(0,b.jsx)("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Ä°ÅŸleniyor...":f?"GiriÅŸ Yap":"KayÄ±t Ol"})]}),(0,b.jsxs)("div",{className:"auth-switch",children:[f?"HesabÄ±nÄ±z yok mu?":"Zaten hesabÄ±nÄ±z var mÄ±?",(0,b.jsx)("button",{className:"text-button",onClick:()=>{g(!f),G()},disabled:t,children:f?"KayÄ±t Ol":"GiriÅŸ Yap"})]})]})]})})}var j=a.i(9453);function k(){let a=(0,j.useTheme)();if(!a)return null;let{theme:c,toggleTheme:d}=a;return(0,b.jsx)("button",{className:"theme-toggle",onClick:d,title:"light"===c?"KaranlÄ±k moda geÃ§":"AydÄ±nlÄ±k moda geÃ§","aria-label":"Tema deÄŸiÅŸtir",children:(0,b.jsx)("span",{className:"theme-icon",children:"light"===c?"ðŸŒ™":"â˜€ï¸"})})}var l=a.i(89769),m=a.i(50944);function n({notification:a,onRead:c}){let d=(0,m.useRouter)();return(0,b.jsxs)("div",{className:`notification-item ${a.read?"read":"unread"}`,onClick:()=>{a.read||c(a.id),a.actionUrl?d.push(a.actionUrl):a.storyId&&d.push(`/story/${a.storyId}`)},children:[(0,b.jsx)("div",{className:"notification-icon",children:(()=>{if(a.icon)return a.icon;switch(a.type){case"comment":case"reply":return"ðŸ’¬";case"like":return"â¤ï¸";case"favorite":return"â­";case"new_follower":return"ðŸ‘¥";case"badge_earned":return"ðŸ†";case"story_published":return"ðŸ“š";default:return"ðŸ””"}})()}),(0,b.jsxs)("div",{className:"notification-content",children:[(0,b.jsxs)("div",{className:"notification-header",children:[a.actorAvatar&&(0,b.jsx)("img",{src:a.actorAvatar,alt:a.actorName||"",className:"notification-avatar"}),(0,b.jsx)("span",{className:"notification-actor",children:a.actorName})]}),(0,b.jsx)("p",{className:"notification-message",children:a.message}),a.storyTitle&&(0,b.jsxs)("span",{className:"notification-story-title",children:['"',a.storyTitle,'"']}),(0,b.jsx)("span",{className:"notification-time",children:(0,l.getRelativeTime)(a.createdAt)})]}),!a.read&&(0,b.jsx)("div",{className:"notification-unread-indicator"})]})}function o({notifications:a,onClose:d,onNotificationsUpdate:e}){let[f,g]=(0,c.useState)(!1),h=async a=>{try{await (0,l.markAsRead)(a),e()}catch(a){console.error("Error marking notification as read:",a)}},i=async()=>{if(!f){g(!0);try{let b=a[0]?.userId;b&&(await (0,l.markAllAsRead)(b),e())}catch(a){console.error("Error marking all as read:",a)}finally{g(!1)}}},j=a.filter(a=>!a.read).length;return(0,b.jsxs)("div",{className:"notification-panel",children:[(0,b.jsxs)("div",{className:"notification-panel-header",children:[(0,b.jsx)("h3",{children:"Bildirimler"}),j>0&&(0,b.jsx)("button",{className:"mark-all-read-button",onClick:i,disabled:f,children:f?"Ä°ÅŸleniyor...":"TÃ¼mÃ¼nÃ¼ okundu iÅŸaretle"})]}),(0,b.jsx)("div",{className:"notification-list",children:0===a.length?(0,b.jsxs)("div",{className:"empty-notifications",children:[(0,b.jsx)("span",{className:"empty-icon",children:"ðŸ””"}),(0,b.jsx)("p",{children:"HenÃ¼z bildiriminiz yok"})]}):a.map(a=>(0,b.jsx)(n,{notification:a,onRead:h},a.id))})]})}function p(){let{user:a}=(0,e.useAuth)(),[d,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(0),[i,j]=(0,c.useState)(!1),k=(0,c.useRef)(null);(0,c.useEffect)(()=>{if(!a){f([]),h(0);return}let b=(0,l.subscribeToNotifications)(a.uid,a=>{f(a),h(a.filter(a=>!a.read).length)});return()=>b()},[a]),(0,c.useEffect)(()=>{function a(a){k.current&&!k.current.contains(a.target)&&j(!1)}if(i)return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[i]);let m=async()=>{a&&h(await (0,l.getUnreadCount)(a.uid))};return a?(0,b.jsxs)("div",{className:"notification-bell-wrapper",ref:k,children:[(0,b.jsxs)("button",{className:"notification-bell",onClick:()=>j(!i),title:"Bildirimler",children:[(0,b.jsx)("span",{className:"bell-icon",children:"ðŸ””"}),g>0&&(0,b.jsx)("span",{className:"notification-badge",children:g>9?"9+":g})]}),i&&(0,b.jsx)(o,{notifications:d,onClose:()=>j(!1),onNotificationsUpdate:m})]}):null}function q(){let{user:a,loading:f}=(0,e.useAuth)(),[g,j]=(0,c.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("header",{className:"app-header",children:(0,b.jsxs)("div",{className:"header-container",children:[(0,b.jsxs)(d.default,{href:"/",className:"header-logo",children:[(0,b.jsx)("span",{className:"logo-icon",children:"ðŸ“–"}),(0,b.jsx)("span",{className:"logo-text",children:"Fabula"})]}),(0,b.jsxs)("nav",{className:"header-nav",children:[(0,b.jsx)(d.default,{href:"/",className:"nav-link",children:"Ana Sayfa"}),(0,b.jsx)(d.default,{href:"/stories",className:"nav-link",children:"Hikayeler"}),a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(d.default,{href:"/drafts",className:"nav-link",children:[(0,b.jsx)("span",{className:"nav-icon",children:"ðŸ“"}),"Taslaklar"]}),(0,b.jsxs)(d.default,{href:"/favorites",className:"nav-link",children:[(0,b.jsx)("span",{className:"nav-icon",children:"â­"}),"Favoriler"]})]})]}),(0,b.jsxs)("div",{className:"header-actions",children:[(0,b.jsx)(k,{}),a&&(0,b.jsx)(p,{}),f?(0,b.jsx)("span",{className:"auth-loading",children:"YÃ¼kleniyor..."}):a?(0,b.jsx)(h,{}):(0,b.jsxs)("button",{className:"login-button",onClick:()=>j(!0),children:[(0,b.jsx)("span",{children:"ðŸ”"}),"GiriÅŸ Yap"]})]})]})}),(0,b.jsx)(i,{isOpen:g,onClose:()=>j(!1)})]})}a.s(["default",()=>q],8226)},63907,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11642),e=a.i(89769);function f(){let{user:a}=(0,d.useAuth)(),[f,g]=(0,c.useState)(null);return((0,c.useEffect)(()=>{if(!a)return;let b=(0,e.subscribeToNotifications)(a.uid,a=>{let b=a[0];b&&"badge_earned"===b.type&&!b.read&&new Date().getTime()-b.createdAt.getTime()<1e4&&(g({visible:!0,message:b.message,badgeName:b.badgeName,icon:b.icon}),setTimeout(()=>{g(null)},5e3))});return()=>b()},[a]),f&&f.visible)?(0,b.jsx)("div",{className:"fixed bottom-8 right-8 z-50 animate-bounce-in",children:(0,b.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-6 rounded-xl shadow-2xl flex items-center gap-4 border-4 border-white/30 backdrop-blur-sm",children:[(0,b.jsx)("div",{className:"text-4xl animate-pulse",children:f.icon||"ðŸ†"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-lg uppercase tracking-wider text-yellow-100",children:"Seviye AtladÄ±n!"}),(0,b.jsx)("p",{className:"font-medium text-white text-lg",children:f.badgeName})]}),(0,b.jsx)("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full animate-ping",children:"YENÄ°!"})]})}):null}a.s(["default",()=>f])}];

//# sourceMappingURL=src_70d9d362._.js.map