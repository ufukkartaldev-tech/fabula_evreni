module.exports=[7157,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11642),e=a.i(68209);a.i(69387);var f=a.i(60574),g=a.i(79353);async function h(a){try{let b=(0,f.collection)(g.db,"stories"),c=(0,f.query)(b,(0,f.where)("authorId","==",a),(0,f.orderBy)("createdAt","desc"));return(await (0,f.getDocs)(c)).docs.map(a=>{let b=a.data();return{id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date}})}catch(a){return console.error("Error fetching user stories:",a),[]}}async function i(a){try{let b=(0,f.collection)(g.db,"comments"),c=(0,f.query)(b,(0,f.where)("author.id","==",a),(0,f.orderBy)("createdAt","desc"));return(await (0,f.getDocs)(c)).docs.map(a=>{let b=a.data();return{id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date}})}catch(a){return console.error("Error fetching user comments:",a),[]}}async function j(a){try{let[b,c]=await Promise.all([h(a),i(a)]),d=b.reduce((a,b)=>a+(b.stats?.views||0),0),e=b.reduce((a,b)=>a+(b.stats?.likes||0),0);return{storiesCount:b.length,commentsCount:c.length,totalViews:d,totalLikes:e}}catch(a){return console.error("Error fetching user stats:",a),{storiesCount:0,commentsCount:0,totalViews:0,totalLikes:0}}}var k=a.i(10123),l=a.i(59299);let m=(0,f.collection)(g.db,"follows"),n=(0,f.collection)(g.db,"users");async function o(a,b){try{if(a===b)return{success:!1,error:"Kendinizi takip edemezsiniz"};if(await q(a,b))return{success:!1,error:"Zaten takip ediyorsunuz"};let c=(0,f.writeBatch)(g.db),d=(0,f.doc)(m);c.set(d,{followerId:a,followingId:b,createdAt:(0,f.serverTimestamp)()});let e=(0,f.doc)(n,a);c.update(e,{followingCount:(0,f.increment)(1)});let h=(0,f.doc)(n,b);return c.update(h,{followerCount:(0,f.increment)(1)}),await c.commit(),{success:!0}}catch(a){return console.error("Error following user:",a),{success:!1,error:"Takip edilemedi"}}}async function p(a,b){try{let c=(0,f.query)(m,(0,f.where)("followerId","==",a),(0,f.where)("followingId","==",b)),d=await (0,f.getDocs)(c);if(d.empty)return{success:!1,error:"Takip kaydÄ± bulunamadÄ±"};let e=(0,f.writeBatch)(g.db);d.docs.forEach(a=>{e.delete(a.ref)});let h=(0,f.doc)(n,a);e.update(h,{followingCount:(0,f.increment)(-1)});let i=(0,f.doc)(n,b);return e.update(i,{followerCount:(0,f.increment)(-1)}),await e.commit(),{success:!0}}catch(a){return console.error("Error unfollowing user:",a),{success:!1,error:"Takipten Ã§Ä±kÄ±lamadÄ±"}}}async function q(a,b){try{let c=(0,f.query)(m,(0,f.where)("followerId","==",a),(0,f.where)("followingId","==",b));return!(await (0,f.getDocs)(c)).empty}catch(a){return console.error("Error checking follow status:",a),!1}}var r=a.i(89769);function s({userId:a,userName:e,userAvatar:f,size:g="medium"}){let{user:h}=(0,d.useAuth)(),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!0);(0,c.useEffect)(()=>{h?async function(){if(h)try{let b=await q(h.uid,a);j(b)}catch(a){console.error("Error checking follow status:",a)}finally{n(!1)}}():n(!1)},[h,a]);let s=async b=>{if(b.stopPropagation(),!h||k)return;l(!0);let c=!i;j(c);try{c?(await o(h.uid,a)).success?await (0,r.createFollowNotification)(a,h.uid,h.displayName||"Anonim",h.photoURL||""):j(!1):(await p(h.uid,a)).success||j(!0)}catch(a){console.error("Error toggling follow:",a),j(!c)}finally{l(!1)}};return h?.uid===a||m?null:(0,b.jsx)("button",{className:`follow-button ${{small:"follow-button-small",medium:"follow-button-medium",large:"follow-button-large"}[g]} ${i?"following":""} ${!h?"disabled":""}`,onClick:s,disabled:!h||k,title:h?i?"Takibi BÄ±rak":"Takip Et":"Takip etmek iÃ§in giriÅŸ yapÄ±n",children:k?(0,b.jsx)("span",{className:"spinner-small"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"follow-icon",children:i?"âœ“":"+"}),(0,b.jsx)("span",{className:"follow-text",children:i?"Takip Ediliyor":"Takip Et"})]})})}function t({params:a}){let{user:f}=(0,d.useAuth)(),[g,i]=(0,c.useState)(""),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)({storiesCount:0,commentsCount:0,totalViews:0,totalLikes:0}),[t,u]=(0,c.useState)(!0);if((0,c.useEffect)(()=>{!async function(){i((await a).uid)}()},[a]),(0,c.useEffect)(()=>{g&&a();async function a(){try{let[a,b,c]=await Promise.all([(0,e.getUserProfile)(g),h(g),j(g)]);n(a),p(b),r(c)}catch(a){console.error("Error loading profile:",a)}finally{u(!1)}}},[g]),t)return(0,b.jsx)("div",{className:"profile-page",children:(0,b.jsx)("div",{className:"profile-container",children:(0,b.jsxs)("div",{className:"loading-state",children:[(0,b.jsx)("div",{className:"spinner"}),(0,b.jsx)("p",{children:"Profil yÃ¼kleniyor..."})]})})});if(!m)return(0,b.jsx)("div",{className:"profile-page",children:(0,b.jsx)("div",{className:"profile-container",children:(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("span",{className:"empty-icon",children:"âŒ"}),(0,b.jsx)("h2",{children:"KullanÄ±cÄ± BulunamadÄ±"})]})})});let v=m.xp||0,w=(0,k.getUserBadge)(v),x=(0,k.getXPToNextBadge)(v),y=f?.uid===g;return(0,b.jsx)("div",{className:"profile-page",children:(0,b.jsxs)("div",{className:"profile-container",children:[(0,b.jsxs)("div",{className:"profile-header",children:[(0,b.jsx)("div",{className:"profile-avatar",children:m.photoURL?(0,b.jsx)("img",{src:m.photoURL,alt:m.displayName}):(0,b.jsx)("span",{className:"avatar-placeholder",children:"ðŸ‘¤"})}),(0,b.jsxs)("div",{className:"profile-info",children:[(0,b.jsxs)("div",{className:"profile-name-row",children:[(0,b.jsx)("h1",{className:"profile-name",children:m.displayName}),!y&&(0,b.jsx)(s,{userId:g,userName:m.displayName,userAvatar:m.photoURL||"",size:"medium"})]}),w&&(0,b.jsxs)("div",{className:"profile-badge",children:[(0,b.jsx)("span",{className:"badge-emoji",children:w.emoji}),(0,b.jsx)("span",{className:"badge-name",children:w.name})]}),(0,b.jsxs)("div",{className:"profile-follow-stats",children:[(0,b.jsxs)("span",{className:"follow-stat",children:[(0,b.jsx)("strong",{children:m.followerCount||0})," TakipÃ§i"]}),(0,b.jsxs)("span",{className:"follow-stat",children:[(0,b.jsx)("strong",{children:m.followingCount||0})," Takip"]})]})]})]}),(0,b.jsxs)("div",{className:"xp-progress-section mb-8 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Mevcut Seviye"}),(0,b.jsx)("h3",{className:"text-xl font-bold text-indigo-600 dark:text-indigo-400",children:w.name})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Toplam XP"}),(0,b.jsxs)("h3",{className:"text-xl font-bold",children:[v," XP"]})]})]}),(0,b.jsx)("div",{className:"relative w-full h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-indigo-500 to-purple-600 transition-all duration-1000 ease-out",style:{width:`${x.progress}%`}})}),x.nextBadge?(0,b.jsxs)("p",{className:"text-sm text-center mt-2 text-gray-500",children:["Sonraki seviye ",(0,b.jsx)("strong",{children:x.nextBadge.name})," iÃ§in",(0,b.jsxs)("span",{className:"font-bold text-indigo-500",children:[" ",x.remainingXP," XP"]})," daha kazanmalÄ±sÄ±n."]}):(0,b.jsx)("p",{className:"text-sm text-center mt-2 text-yellow-500 font-bold",children:"ðŸ† Zirvedesin! Efsanevi bir yazarsÄ±n."})]}),(0,b.jsxs)("div",{className:"profile-stats",children:[(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsx)("span",{className:"stat-icon",children:"ðŸ“š"}),(0,b.jsx)("span",{className:"stat-value",children:q.storiesCount}),(0,b.jsx)("span",{className:"stat-label",children:"Hikaye"})]}),(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsx)("span",{className:"stat-icon",children:"ðŸ’¬"}),(0,b.jsx)("span",{className:"stat-value",children:q.commentsCount}),(0,b.jsx)("span",{className:"stat-label",children:"Yorum"})]}),(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsx)("span",{className:"stat-icon",children:"ðŸ‘ï¸"}),(0,b.jsx)("span",{className:"stat-value",children:q.totalViews}),(0,b.jsx)("span",{className:"stat-label",children:"GÃ¶rÃ¼ntÃ¼lenme"})]}),(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsx)("span",{className:"stat-icon",children:"â¤ï¸"}),(0,b.jsx)("span",{className:"stat-value",children:q.totalLikes}),(0,b.jsx)("span",{className:"stat-label",children:"BeÄŸeni"})]})]}),(0,b.jsxs)("div",{className:"badge-showcase",children:[(0,b.jsx)("h2",{className:"section-title",children:"ðŸ† Rozet Koleksiyonu"}),(0,b.jsx)("div",{className:"badges-grid",children:k.badges.map(a=>{let c=v>=a.requiredXP;return(0,b.jsxs)("div",{className:`badge-item ${c?"unlocked":"locked"}`,title:`${a.name} - ${a.description}`,children:[(0,b.jsx)("span",{className:"badge-emoji",children:a.emoji}),(0,b.jsx)("span",{className:"badge-name",children:a.name}),!c&&(0,b.jsx)("span",{className:"badge-lock",children:"ðŸ”’"})]},a.id)})})]}),(0,b.jsxs)("div",{className:"user-stories-section",children:[(0,b.jsxs)("h2",{className:"section-title",children:["ðŸ“š ",y?"Hikayelerim":"Hikayeleri"]}),0===o.length?(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("span",{className:"empty-icon",children:"ðŸ“"}),(0,b.jsx)("p",{children:"HenÃ¼z hikaye yazÄ±lmamÄ±ÅŸ."})]}):(0,b.jsx)("div",{className:"stories-grid",children:o.map(a=>(0,b.jsx)(l.default,{story:a},a.id))})]})]})})}a.s(["default",()=>t],7157)}];

//# sourceMappingURL=src_app_profile_%5Buid%5D_page_tsx_595fe393._.js.map