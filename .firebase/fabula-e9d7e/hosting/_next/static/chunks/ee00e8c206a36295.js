(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53288,e=>{"use strict";var t=e.i(43476),s=e.i(932),a=e.i(71645),i=e.i(57951);function r(){let e,r,l,n,c,o,d,m,u,h,p=(0,s.c)(23),{user:b}=(0,i.useAuth)(),[g,x]=(0,a.useState)(""),[f,j]=(0,a.useState)("");p[0]!==g||p[1]!==b?(e=async()=>{if(b){j("Processing...");try{let e=await fetch("/api/admin/set-custom-claims",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:b.uid,action:"grant",secret:g})}),t=await e.json();e.ok?j("Success! You are now an admin. Please refresh the page/re-login to update claims."):j("Error: "+t.error)}catch(e){j("Error: "+e)}}},p[0]=g,p[1]=b,p[2]=e):e=p[2];let y=e;if(!b){let e;return p[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"p-8",children:"Please login first."}),p[3]=e):e=p[3],e}return p[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Admin Setup"}),p[4]=r):r=p[4],p[5]!==b.email||p[6]!==b.uid?(l=(0,t.jsxs)("p",{className:"mb-4",children:["Current User: ",b.email," (",b.uid,")"]}),p[5]=b.email,p[6]=b.uid,p[7]=l):l=p[7],p[8]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Bootstrap Secret"}),p[8]=n):n=p[8],p[9]===Symbol.for("react.memo_cache_sentinel")?(c=e=>x(e.target.value),p[9]=c):c=p[9],p[10]!==g?(o=(0,t.jsxs)("div",{children:[n,(0,t.jsx)("input",{type:"password",value:g,onChange:c,className:"w-full p-2 border rounded"})]}),p[10]=g,p[11]=o):o=p[11],p[12]!==y?(d=(0,t.jsx)("button",{onClick:y,className:"w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Make Me Admin"}),p[12]=y,p[13]=d):d=p[13],p[14]!==f?(m=f&&(0,t.jsx)("div",{className:`p-4 rounded ${f.includes("Success")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f}),p[14]=f,p[15]=m):m=p[15],p[16]!==o||p[17]!==d||p[18]!==m?(u=(0,t.jsxs)("div",{className:"space-y-4",children:[o,d,m]}),p[16]=o,p[17]=d,p[18]=m,p[19]=u):u=p[19],p[20]!==l||p[21]!==u?(h=(0,t.jsxs)("div",{className:"p-8 max-w-md mx-auto",children:[r,l,u]}),p[20]=l,p[21]=u,p[22]=h):h=p[22],h}e.s(["default",()=>r])}]);