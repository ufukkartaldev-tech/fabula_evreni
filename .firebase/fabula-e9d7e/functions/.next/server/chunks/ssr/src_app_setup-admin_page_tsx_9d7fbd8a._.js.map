{"version":3,"sources":["../../../../src/app/setup-admin/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\nexport default function SetupAdminPage() {\r\n    const { user } = useAuth();\r\n    const [secret, setSecret] = useState('');\r\n    const [status, setStatus] = useState('');\r\n\r\n    const handleMakeAdmin = async () => {\r\n        if (!user) return;\r\n\r\n        setStatus('Processing...');\r\n        try {\r\n            const response = await fetch('/api/admin/set-custom-claims', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    uid: user.uid,\r\n                    action: 'grant',\r\n                    secret: secret\r\n                }),\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                setStatus('Success! You are now an admin. Please refresh the page/re-login to update claims.');\r\n            } else {\r\n                setStatus('Error: ' + data.error);\r\n            }\r\n        } catch (error) {\r\n            setStatus('Error: ' + error);\r\n        }\r\n    };\r\n\r\n    if (!user) {\r\n        return <div className=\"p-8\">Please login first.</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-8 max-w-md mx-auto\">\r\n            <h1 className=\"text-2xl font-bold mb-4\">Admin Setup</h1>\r\n            <p className=\"mb-4\">Current User: {user.email} ({user.uid})</p>\r\n\r\n            <div className=\"space-y-4\">\r\n                <div>\r\n                    <label className=\"block text-sm font-medium mb-1\">Bootstrap Secret</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        value={secret}\r\n                        onChange={(e) => setSecret(e.target.value)}\r\n                        className=\"w-full p-2 border rounded\"\r\n                    />\r\n                </div>\r\n\r\n                <button\r\n                    onClick={handleMakeAdmin}\r\n                    className=\"w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700\"\r\n                >\r\n                    Make Me Admin\r\n                </button>\r\n\r\n                {status && (\r\n                    <div className={`p-4 rounded ${status.includes('Success') ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\r\n                        {status}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACpB,GAAM,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAO,AAAP,IACX,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/B,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAE/B,EAAkB,UACpB,GAAK,CAAD,EAEJ,EAAU,CAFC,gBAGX,GAAI,CACA,IAAM,EAAW,MAAM,MAAM,+BAAgC,CACzD,OAAQ,OACR,QAAS,CACL,eAAgB,kBACpB,EACA,KAAM,KAAK,SAAS,CAAC,CACjB,IAAK,EAAK,GAAG,CACb,OAAQ,QACR,OAAQ,CACZ,EACJ,GAEM,EAAO,MAAM,EAAS,IAAI,GAC5B,EAAS,EAAE,CACX,CADa,CACH,qFAEV,EAAU,UAAY,EAAK,KAAK,CAExC,CAAE,MAAO,EAAO,CACZ,EAAU,UAAY,EAC1B,EACJ,SAEA,AAAK,EAKD,CAAA,CALA,CAKA,CALO,CAKP,IAAA,EAAC,MAAA,CAAI,UAAU,iCACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,gBACxC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,iBAAO,iBAAe,EAAK,KAAK,CAAC,KAAG,EAAK,GAAG,CAAC,OAE1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,0CAAiC,qBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,KAAK,WACL,MAAO,EACP,SAAW,AAAD,GAAO,EAAU,EAAE,MAAM,CAAC,KAAK,EACzC,UAAU,iCAIlB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,EACT,UAAU,4EACb,kBAIA,GACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,YAAY,EAAE,EAAO,QAAQ,CAAC,WAAa,8BAAgC,0BAAA,CAA2B,UAClH,UA5BV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eAAM,uBAkCpC"}