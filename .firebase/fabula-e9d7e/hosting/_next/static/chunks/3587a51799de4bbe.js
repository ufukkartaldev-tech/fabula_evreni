(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10361,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(57951),s=e.i(22016);function d(){let{user:e}=(0,r.useAuth)(),[d,i]=(0,a.useState)([]),[l,n]=(0,a.useState)(!0),[c,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{x()},[e]);let x=async()=>{if(e)try{let t=await e.getIdToken(),a=await fetch("/api/admin/reports",{headers:{Authorization:`Bearer ${t}`}}),r=await a.json();r.reports&&i(r.reports)}catch(e){console.error("Error fetching reports:",e)}finally{n(!1)}},m=async(t,a)=>{if(e){o(t);try{let r=await e.getIdToken();(await fetch(`/api/admin/reports/${t}`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({status:a})})).ok?i(d.map(e=>e.id===t?{...e,status:a}:e)):alert("GÃ¼ncelleme baÅŸarÄ±sÄ±z oldu.")}catch(e){console.error("Error updating report:",e),alert("Bir hata oluÅŸtu.")}finally{o(null)}}};return l?(0,t.jsx)("div",{className:"p-8 text-center",children:"YÃ¼kleniyor..."}):(0,t.jsxs)("div",{className:"admin-reports-page",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Rapor YÃ¶netimi"}),(0,t.jsx)("button",{onClick:x,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"ðŸ”„ Yenile"})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-4 font-medium text-gray-500 dark:text-gray-400",children:"Durum"}),(0,t.jsx)("th",{className:"p-4 font-medium text-gray-500 dark:text-gray-400",children:"Sebep"}),(0,t.jsx)("th",{className:"p-4 font-medium text-gray-500 dark:text-gray-400",children:"Hedef"}),(0,t.jsx)("th",{className:"p-4 font-medium text-gray-500 dark:text-gray-400",children:"Raporlayan"}),(0,t.jsx)("th",{className:"p-4 font-medium text-gray-500 dark:text-gray-400",children:"Tarih"}),(0,t.jsx)("th",{className:"p-4 font-medium text-gray-500 dark:text-gray-400 text-right",children:"Ä°ÅŸlemler"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:d.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[(0,t.jsx)("td",{className:"p-4",children:(e=>{switch(e){case"pending":return(0,t.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"Bekliyor"});case"resolved":return(0,t.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Ã‡Ã¶zÃ¼ldÃ¼"});case"dismissed":return(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium",children:"Reddedildi"})}})(e.status)}),(0,t.jsxs)("td",{className:"p-4",children:[(0,t.jsx)("div",{className:"font-medium",children:e.reason}),(0,t.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",title:e.description,children:e.description})]}),(0,t.jsxs)("td",{className:"p-4",children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-bold uppercase text-xs text-gray-400 mr-2",children:e.targetType}),"story"===e.targetType&&(0,t.jsx)(s.default,{href:`/story/${e.targetId}`,target:"_blank",className:"text-indigo-600 hover:underline",children:"GÃ¶rÃ¼ntÃ¼le"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 italic truncate max-w-xs",children:['"',e.targetContent,'"']})]}),(0,t.jsx)("td",{className:"p-4 text-sm",children:e.reporterName}),(0,t.jsx)("td",{className:"p-4 text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("tr-TR")}),(0,t.jsx)("td",{className:"p-4 text-right",children:(0,t.jsx)("div",{className:"flex justify-end gap-2",children:"pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>m(e.id,"resolved"),disabled:c===e.id,className:"text-green-600 hover:bg-green-50 px-2 py-1 rounded text-sm disabled:opacity-50",children:"âœ… Ã‡Ã¶z"}),(0,t.jsx)("button",{onClick:()=>m(e.id,"dismissed"),disabled:c===e.id,className:"text-gray-600 hover:bg-gray-100 px-2 py-1 rounded text-sm disabled:opacity-50",children:"âŒ Reddet"})]})})})]},e.id))})]})}),0===d.length&&(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Harika! Bekleyen rapor yok. ðŸŽ‰"})]})]})}e.s(["default",()=>d])}]);