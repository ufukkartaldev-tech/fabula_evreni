{"version":3,"sources":["../../../../src/app/admin/stories/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport Link from 'next/link';\r\n\r\ninterface AdminStory {\r\n    id: string;\r\n    title: string;\r\n    author: {\r\n        name: string;\r\n        avatar?: string;\r\n    };\r\n    createdAt: string;\r\n    stats: {\r\n        views: number;\r\n        likes: number;\r\n        comments: number;\r\n    };\r\n}\r\n\r\nexport default function AdminStoriesPage() {\r\n    const { user } = useAuth();\r\n    const [stories, setStories] = useState<AdminStory[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [deletingId, setDeletingId] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        fetchStories();\r\n    }, [user]);\r\n\r\n    const fetchStories = async () => {\r\n        if (!user) return;\r\n        try {\r\n            const token = await user.getIdToken();\r\n            const response = await fetch('/api/admin/stories', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n            const data = await response.json();\r\n            if (data.stories) {\r\n                setStories(data.stories);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching stories:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (!confirm('Bu hikayeyi silmek istediƒüinize emin misiniz? Bu i≈ülem geri alƒ±namaz.')) return;\r\n        if (!user) return;\r\n\r\n        setDeletingId(id);\r\n        try {\r\n            const token = await user.getIdToken();\r\n            const response = await fetch(`/api/admin/stories/${id}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n\r\n            if (response.ok) {\r\n                setStories(stories.filter(s => s.id !== id));\r\n            } else {\r\n                alert('Silme i≈ülemi ba≈üarƒ±sƒ±z oldu.');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error deleting story:', error);\r\n            alert('Bir hata olu≈ütu.');\r\n        } finally {\r\n            setDeletingId(null);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"p-8 text-center\">Y√ºkleniyor...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"admin-stories-page\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h1 className=\"text-2xl font-bold text-gray-800 dark:text-white\">Hikaye Y√∂netimi</h1>\r\n                <button\r\n                    onClick={fetchStories}\r\n                    className=\"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\r\n                >\r\n                    üîÑ Yenile\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-left\">\r\n                        <thead className=\"bg-gray-50 dark:bg-gray-700/50\">\r\n                            <tr>\r\n                                <th className=\"p-4 font-medium text-gray-500 dark:text-gray-400\">Ba≈ülƒ±k</th>\r\n                                <th className=\"p-4 font-medium text-gray-500 dark:text-gray-400\">Yazar</th>\r\n                                <th className=\"p-4 font-medium text-gray-500 dark:text-gray-400\">ƒ∞statistikler</th>\r\n                                <th className=\"p-4 font-medium text-gray-500 dark:text-gray-400\">Tarih</th>\r\n                                <th className=\"p-4 font-medium text-gray-500 dark:text-gray-400 text-right\">ƒ∞≈ülemler</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-100 dark:divide-gray-700\">\r\n                            {stories.map((story) => (\r\n                                <tr key={story.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors\">\r\n                                    <td className=\"p-4\">\r\n                                        <Link href={`/story/${story.id}`} target=\"_blank\" className=\"font-medium text-indigo-600 dark:text-indigo-400 hover:underline\">\r\n                                            {story.title}\r\n                                        </Link>\r\n                                    </td>\r\n                                    <td className=\"p-4\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <span className=\"text-sm\">{story.author.name}</span>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"p-4 text-sm text-gray-500\">\r\n                                        üëÅÔ∏è {story.stats?.views || 0} ‚Ä¢ ‚ù§Ô∏è {story.stats?.likes || 0}\r\n                                    </td>\r\n                                    <td className=\"p-4 text-sm text-gray-500\">\r\n                                        {new Date(story.createdAt).toLocaleDateString('tr-TR')}\r\n                                    </td>\r\n                                    <td className=\"p-4 text-right\">\r\n                                        <button\r\n                                            onClick={() => handleDelete(story.id)}\r\n                                            disabled={deletingId === story.id}\r\n                                            className=\"text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 px-3 py-1 rounded-lg transition-colors text-sm font-medium disabled:opacity-50\"\r\n                                        >\r\n                                            {deletingId === story.id ? 'Siliniyor...' : 'Sil'}\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                {stories.length === 0 && (\r\n                    <div className=\"p-8 text-center text-gray-500\">\r\n                        Hen√ºz hi√ß hikaye yok.\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}