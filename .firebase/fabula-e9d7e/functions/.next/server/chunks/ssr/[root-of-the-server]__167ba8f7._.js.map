{"version":3,"sources":["../../../../src/interfaces/Badge.ts","../../../../node_modules/%40swc/helpers/cjs/_interop_require_wildcard.cjs","../../../../node_modules/next/src/shared/lib/segment.ts","../../../../node_modules/next/src/shared/lib/promise-with-resolvers.ts","../../../../src/contexts/AuthContext.tsx","../../../../src/lib/auth.ts","../../../../src/lib/userService.ts","../../../../src/lib/notificationService.ts"],"sourcesContent":["export interface Badge {\r\n    id: number;\r\n    name: string;\r\n    emoji: string;\r\n    requiredXP: number;\r\n    description: string;\r\n}\r\n\r\nexport const BADGES: Badge[] = [\r\n    {\r\n        id: 1,\r\n        name: 'Ã‡Ä±rak',\r\n        emoji: 'ðŸŒ±',\r\n        requiredXP: 0,\r\n        description: 'Yolculuk baÅŸlÄ±yor'\r\n    },\r\n    {\r\n        id: 2,\r\n        name: 'Gezgin',\r\n        emoji: 'ðŸŽ’',\r\n        requiredXP: 100,\r\n        description: 'Ä°lk adÄ±mlar atÄ±ldÄ±'\r\n    },\r\n    {\r\n        id: 3,\r\n        name: 'KaÅŸif',\r\n        emoji: 'ðŸ§­',\r\n        requiredXP: 300,\r\n        description: 'Yeni dÃ¼nyalar keÅŸfediliyor'\r\n    },\r\n    {\r\n        id: 4,\r\n        name: 'MaceracÄ±',\r\n        emoji: 'âš”ï¸',\r\n        requiredXP: 600,\r\n        description: 'Zorluklara meydan okuyan'\r\n    },\r\n    {\r\n        id: 5,\r\n        name: 'Bilge',\r\n        emoji: 'ðŸ“œ',\r\n        requiredXP: 1000,\r\n        description: 'Bilgi gÃ¼Ã§tÃ¼r'\r\n    },\r\n    {\r\n        id: 6,\r\n        name: 'Ãœstat',\r\n        emoji: 'ðŸ”®',\r\n        requiredXP: 2000,\r\n        description: 'UstalÄ±k seviyesi'\r\n    },\r\n    {\r\n        id: 7,\r\n        name: 'Efsane',\r\n        emoji: 'ðŸ‘‘',\r\n        requiredXP: 5000,\r\n        description: 'AdÄ±n dilden dile dolaÅŸÄ±yor'\r\n    }\r\n];\r\n\r\n/**\r\n * KullanÄ±cÄ±nÄ±n toplam XP'sine gÃ¶re rozetini hesapla\r\n */\r\nexport function getUserBadge(xp: number): Badge {\r\n    // En yÃ¼ksek eÅŸikten baÅŸla, aÅŸaÄŸÄ± in\r\n    for (let i = BADGES.length - 1; i >= 0; i--) {\r\n        if (xp >= BADGES[i].requiredXP) {\r\n            return BADGES[i];\r\n        }\r\n    }\r\n\r\n    // HiÃ§ XP yoksa bile ilk rozeti ver\r\n    return BADGES[0];\r\n}\r\n\r\n/**\r\n * Sonraki rozete kaÃ§ XP kaldÄ±ÄŸÄ±nÄ± hesapla\r\n */\r\nexport function getXPToNextBadge(xp: number): { nextBadge: Badge | null; remainingXP: number; progress: number } {\r\n    const currentBadge = getUserBadge(xp);\r\n    const currentIndex = BADGES.findIndex(b => b.id === currentBadge.id);\r\n\r\n    // Son rozetteyse\r\n    if (currentIndex === BADGES.length - 1) {\r\n        return { nextBadge: null, remainingXP: 0, progress: 100 };\r\n    }\r\n\r\n    const nextBadge = BADGES[currentIndex + 1];\r\n    const remainingXP = nextBadge.requiredXP - xp;\r\n\r\n    // Ä°lerleme yÃ¼zdesi hesapla (BulunduÄŸu seviye ile bir sonraki seviye arasÄ±)\r\n    const currentLevelBaseXP = currentBadge.requiredXP;\r\n    const nextLevelXP = nextBadge.requiredXP;\r\n    const levelSpan = nextLevelXP - currentLevelBaseXP;\r\n    const xpInLevel = xp - currentLevelBaseXP;\r\n    const progress = Math.min(100, Math.max(0, (xpInLevel / levelSpan) * 100));\r\n\r\n    return { nextBadge, remainingXP, progress };\r\n}\r\n\r\n/**\r\n * TÃ¼m rozetleri al\r\n */\r\nexport function getAllBadges(): Badge[] {\r\n    return BADGES;\r\n}\r\n\r\n// Export badges as an alias for backward compatibility\r\nexport const badges = BADGES;\r\n","\"use strict\";\n\nfunction _getRequireWildcardCache(nodeInterop) {\n    if (typeof WeakMap !== \"function\") return null;\n\n    var cacheBabelInterop = new WeakMap();\n    var cacheNodeInterop = new WeakMap();\n\n    return (_getRequireWildcardCache = function(nodeInterop) {\n        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n    })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n    if (!nodeInterop && obj && obj.__esModule) return obj;\n    if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") return { default: obj };\n\n    var cache = _getRequireWildcardCache(nodeInterop);\n\n    if (cache && cache.has(obj)) return cache.get(obj);\n\n    var newObj = { __proto__: null };\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n        if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n            if (desc && (desc.get || desc.set)) Object.defineProperty(newObj, key, desc);\n            else newObj[key] = obj[key];\n        }\n    }\n\n    newObj.default = obj;\n\n    if (cache) cache.set(obj, newObj);\n\n    return newObj;\n}\nexports._ = _interop_require_wildcard;\n","import type { FlightRouterState, Segment } from './app-router-types'\n\nexport function getSegmentValue(segment: Segment) {\n  return Array.isArray(segment) ? segment[1] : segment\n}\n\nexport function isGroupSegment(segment: string) {\n  // Use array[0] for performant purpose\n  return segment[0] === '(' && segment.endsWith(')')\n}\n\nexport function isParallelRouteSegment(segment: string) {\n  return segment.startsWith('@') && segment !== '@children'\n}\n\nexport function addSearchParamsIfPageSegment(\n  segment: Segment,\n  searchParams: Record<string, string | string[] | undefined>\n) {\n  const isPageSegment = segment.includes(PAGE_SEGMENT_KEY)\n\n  if (isPageSegment) {\n    const stringifiedQuery = JSON.stringify(searchParams)\n    return stringifiedQuery !== '{}'\n      ? PAGE_SEGMENT_KEY + '?' + stringifiedQuery\n      : PAGE_SEGMENT_KEY\n  }\n\n  return segment\n}\n\nexport function computeSelectedLayoutSegment(\n  segments: string[] | null,\n  parallelRouteKey: string\n): string | null {\n  if (!segments || segments.length === 0) {\n    return null\n  }\n\n  // For 'children', use first segment; for other parallel routes, use last segment\n  const rawSegment =\n    parallelRouteKey === 'children'\n      ? segments[0]\n      : segments[segments.length - 1]\n\n  // If the default slot is showing, return null since it's not technically \"selected\" (it's a fallback)\n  // Returning an internal value like `__DEFAULT__` would be confusing\n  return rawSegment === DEFAULT_SEGMENT_KEY ? null : rawSegment\n}\n\n/** Get the canonical parameters from the current level to the leaf node. */\nexport function getSelectedLayoutSegmentPath(\n  tree: FlightRouterState,\n  parallelRouteKey: string,\n  first = true,\n  segmentPath: string[] = []\n): string[] {\n  let node: FlightRouterState\n  if (first) {\n    // Use the provided parallel route key on the first parallel route\n    node = tree[1][parallelRouteKey]\n  } else {\n    // After first parallel route prefer children, if there's no children pick the first parallel route.\n    const parallelRoutes = tree[1]\n    node = parallelRoutes.children ?? Object.values(parallelRoutes)[0]\n  }\n\n  if (!node) return segmentPath\n  const segment = node[0]\n\n  let segmentValue = getSegmentValue(segment)\n\n  if (!segmentValue || segmentValue.startsWith(PAGE_SEGMENT_KEY)) {\n    return segmentPath\n  }\n\n  segmentPath.push(segmentValue)\n\n  return getSelectedLayoutSegmentPath(\n    node,\n    parallelRouteKey,\n    false,\n    segmentPath\n  )\n}\n\nexport const PAGE_SEGMENT_KEY = '__PAGE__'\nexport const DEFAULT_SEGMENT_KEY = '__DEFAULT__'\n","export function createPromiseWithResolvers<T>(): PromiseWithResolvers<T> {\n  // Shim of Stage 4 Promise.withResolvers proposal\n  let resolve: (value: T | PromiseLike<T>) => void\n  let reject: (reason: any) => void\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res\n    reject = rej\n  })\n  return { resolve: resolve!, reject: reject!, promise }\n}\n","'use client';\r\n\r\nimport { createContext, useContext, useEffect, useState, ReactNode } from 'react';\r\nimport { User, onAuthStateChanged } from 'firebase/auth';\r\nimport { auth } from '@/lib/firebase';\r\nimport {\r\n    signInWithGoogle as googleSignIn,\r\n    signInWithEmail as emailSignIn,\r\n    signUpWithEmail as emailSignUp,\r\n    signOutUser,\r\n    resetPassword as sendResetEmail\r\n} from '@/lib/auth';\r\nimport { syncUserProfile, getUserProfile } from '@/lib/userService';\r\nimport { UserProfile } from '@/interfaces/User';\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    userProfile: UserProfile | null;\r\n    loading: boolean;\r\n    signInWithGoogle: (rememberMe?: boolean) => Promise<void>;\r\n    signInWithEmail: (email: string, password: string, rememberMe?: boolean) => Promise<void>;\r\n    signUpWithEmail: (email: string, password: string, displayName: string, rememberMe?: boolean) => Promise<void>;\r\n    signOut: () => Promise<void>;\r\n    resetPassword: (email: string) => Promise<void>;\r\n    refreshUserProfile: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [userProfile, setUserProfile] = useState<UserProfile | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // Auth state deÄŸiÅŸikliklerini dinle\r\n        const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n            setUser(user);\r\n\r\n            if (user) {\r\n                // KullanÄ±cÄ± giriÅŸ yaptÄ±ysa profili senkronize et\r\n                try {\r\n                    const profile = await syncUserProfile(user);\r\n                    setUserProfile(profile);\r\n                } catch (error) {\r\n                    console.error('Error syncing user profile:', error);\r\n                    setUserProfile(null);\r\n                }\r\n            } else {\r\n                // KullanÄ±cÄ± Ã§Ä±kÄ±ÅŸ yaptÄ±ysa profili temizle\r\n                setUserProfile(null);\r\n            }\r\n\r\n            setLoading(false);\r\n        });\r\n\r\n        return unsubscribe;\r\n    }, []);\r\n\r\n    const refreshUserProfile = async () => {\r\n        if (user) {\r\n            try {\r\n                const profile = await getUserProfile(user.uid);\r\n                setUserProfile(profile);\r\n            } catch (error) {\r\n                console.error('Error refreshing user profile:', error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSignInWithGoogle = async (rememberMe: boolean = false) => {\r\n        try {\r\n            await googleSignIn(rememberMe);\r\n        } catch (error: any) {\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const handleSignInWithEmail = async (\r\n        email: string,\r\n        password: string,\r\n        rememberMe: boolean = false\r\n    ) => {\r\n        try {\r\n            await emailSignIn(email, password, rememberMe);\r\n        } catch (error: any) {\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const handleSignUpWithEmail = async (\r\n        email: string,\r\n        password: string,\r\n        displayName: string,\r\n        rememberMe: boolean = false\r\n    ) => {\r\n        try {\r\n            await emailSignUp(email, password, displayName, rememberMe);\r\n        } catch (error: any) {\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const handleSignOut = async () => {\r\n        try {\r\n            await signOutUser();\r\n        } catch (error: any) {\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const handleResetPassword = async (email: string) => {\r\n        try {\r\n            await sendResetEmail(email);\r\n        } catch (error: any) {\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const value = {\r\n        user,\r\n        userProfile,\r\n        loading,\r\n        signInWithGoogle: handleSignInWithGoogle,\r\n        signInWithEmail: handleSignInWithEmail,\r\n        signUpWithEmail: handleSignUpWithEmail,\r\n        signOut: handleSignOut,\r\n        resetPassword: handleResetPassword,\r\n        refreshUserProfile,\r\n    };\r\n\r\n    return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth() {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n}\r\n","import {\r\n    signInWithPopup,\r\n    GoogleAuthProvider,\r\n    createUserWithEmailAndPassword,\r\n    signInWithEmailAndPassword,\r\n    signOut,\r\n    sendPasswordResetEmail,\r\n    updateProfile,\r\n    User,\r\n    UserCredential\r\n} from 'firebase/auth';\r\nimport { auth, setPersistence, browserLocalPersistence, browserSessionPersistence } from './firebase';\r\n\r\n// Google Provider\r\nconst googleProvider = new GoogleAuthProvider();\r\n\r\n/**\r\n * Google ile giriÅŸ yap\r\n */\r\nexport async function signInWithGoogle(rememberMe: boolean = false): Promise<UserCredential> {\r\n    try {\r\n        // Persistence ayarla\r\n        await setPersistence(\r\n            auth,\r\n            rememberMe ? browserLocalPersistence : browserSessionPersistence\r\n        );\r\n\r\n        // Google popup ile giriÅŸ\r\n        const result = await signInWithPopup(auth, googleProvider);\r\n        return result;\r\n    } catch (error: any) {\r\n        console.error('Google sign-in error:', error);\r\n        throw new Error(getAuthErrorMessage(error.code));\r\n    }\r\n}\r\n\r\n/**\r\n * Email ve ÅŸifre ile kayÄ±t ol\r\n */\r\nexport async function signUpWithEmail(\r\n    email: string,\r\n    password: string,\r\n    displayName: string,\r\n    rememberMe: boolean = false\r\n): Promise<UserCredential> {\r\n    try {\r\n        // Persistence ayarla\r\n        await setPersistence(\r\n            auth,\r\n            rememberMe ? browserLocalPersistence : browserSessionPersistence\r\n        );\r\n\r\n        // KullanÄ±cÄ± oluÅŸtur\r\n        const result = await createUserWithEmailAndPassword(auth, email, password);\r\n\r\n        // Profil bilgilerini gÃ¼ncelle\r\n        if (result.user) {\r\n            await updateProfile(result.user, { displayName });\r\n        }\r\n\r\n        return result;\r\n    } catch (error: any) {\r\n        console.error('Sign-up error:', error);\r\n        throw new Error(getAuthErrorMessage(error.code));\r\n    }\r\n}\r\n\r\n/**\r\n * Email ve ÅŸifre ile giriÅŸ yap\r\n */\r\nexport async function signInWithEmail(\r\n    email: string,\r\n    password: string,\r\n    rememberMe: boolean = false\r\n): Promise<UserCredential> {\r\n    try {\r\n        // Persistence ayarla\r\n        await setPersistence(\r\n            auth,\r\n            rememberMe ? browserLocalPersistence : browserSessionPersistence\r\n        );\r\n\r\n        // GiriÅŸ yap\r\n        const result = await signInWithEmailAndPassword(auth, email, password);\r\n        return result;\r\n    } catch (error: any) {\r\n        console.error('Sign-in error:', error);\r\n        throw new Error(getAuthErrorMessage(error.code));\r\n    }\r\n}\r\n\r\n/**\r\n * Ã‡Ä±kÄ±ÅŸ yap\r\n */\r\nexport async function signOutUser(): Promise<void> {\r\n    try {\r\n        await signOut(auth);\r\n    } catch (error: any) {\r\n        console.error('Sign-out error:', error);\r\n        throw new Error('Ã‡Ä±kÄ±ÅŸ yapÄ±lÄ±rken bir hata oluÅŸtu.');\r\n    }\r\n}\r\n\r\n/**\r\n * Åžifre sÄ±fÄ±rlama emaili gÃ¶nder\r\n */\r\nexport async function resetPassword(email: string): Promise<void> {\r\n    try {\r\n        await sendPasswordResetEmail(auth, email);\r\n    } catch (error: any) {\r\n        console.error('Password reset error:', error);\r\n        throw new Error(getAuthErrorMessage(error.code));\r\n    }\r\n}\r\n\r\n/**\r\n * KullanÄ±cÄ± profil bilgilerini gÃ¼ncelle\r\n */\r\nexport async function updateUserProfile(\r\n    user: User,\r\n    profile: { displayName?: string; photoURL?: string }\r\n): Promise<void> {\r\n    try {\r\n        await updateProfile(user, profile);\r\n    } catch (error: any) {\r\n        console.error('Profile update error:', error);\r\n        throw new Error('Profil gÃ¼ncellenirken bir hata oluÅŸtu.');\r\n    }\r\n}\r\n\r\n/**\r\n * Firebase auth error kodlarÄ±nÄ± TÃ¼rkÃ§e mesajlara Ã§evir\r\n */\r\nfunction getAuthErrorMessage(errorCode: string): string {\r\n    const errorMessages: { [key: string]: string } = {\r\n        // Email/Password errors\r\n        'auth/email-already-in-use': 'Bu email adresi zaten kullanÄ±lÄ±yor.',\r\n        'auth/invalid-email': 'LÃ¼tfen geÃ§erli bir email adresi girin.',\r\n        'auth/operation-not-allowed': 'Bu iÅŸlem ÅŸu anda kullanÄ±lamÄ±yor.',\r\n        'auth/weak-password': 'Åžifre Ã§ok zayÄ±f. En az 6 karakter olmalÄ±.',\r\n        'auth/user-disabled': 'Bu hesap devre dÄ±ÅŸÄ± bÄ±rakÄ±lmÄ±ÅŸ.',\r\n        'auth/user-not-found': 'Bu email adresiyle kayÄ±tlÄ± kullanÄ±cÄ± bulunamadÄ±.',\r\n        'auth/wrong-password': 'HatalÄ± ÅŸifre. LÃ¼tfen tekrar deneyin.',\r\n        'auth/invalid-credential': 'GeÃ§ersiz giriÅŸ bilgileri. LÃ¼tfen kontrol edin.',\r\n        'auth/account-exists-with-different-credential': 'Bu email adresi farklÄ± bir giriÅŸ yÃ¶ntemiyle kullanÄ±lÄ±yor.',\r\n\r\n        // Google Sign-In errors\r\n        'auth/popup-closed-by-user': 'GiriÅŸ penceresi kapatÄ±ldÄ±. LÃ¼tfen tekrar deneyin.',\r\n        'auth/cancelled-popup-request': 'GiriÅŸ iÅŸlemi iptal edildi.',\r\n        'auth/popup-blocked': 'Popup penceresi tarayÄ±cÄ± tarafÄ±ndan engellendi. LÃ¼tfen popup engelleyiciyi kapatÄ±n.',\r\n        'auth/unauthorized-domain': 'Bu domain yetkili deÄŸil. LÃ¼tfen yÃ¶netici ile iletiÅŸime geÃ§in.',\r\n\r\n        // Network errors\r\n        'auth/network-request-failed': 'Ä°nternet baÄŸlantÄ±nÄ±zÄ± kontrol edin ve tekrar deneyin.',\r\n        'auth/timeout': 'Ä°ÅŸlem zaman aÅŸÄ±mÄ±na uÄŸradÄ±. LÃ¼tfen tekrar deneyin.',\r\n\r\n        // Rate limiting\r\n        'auth/too-many-requests': 'Ã‡ok fazla deneme yapÄ±ldÄ±. LÃ¼tfen birkaÃ§ dakika sonra tekrar deneyin.',\r\n\r\n        // Password reset errors\r\n        'auth/expired-action-code': 'Bu baÄŸlantÄ±nÄ±n sÃ¼resi dolmuÅŸ. Yeni bir ÅŸifre sÄ±fÄ±rlama isteÄŸi gÃ¶nderin.',\r\n        'auth/invalid-action-code': 'GeÃ§ersiz veya kullanÄ±lmÄ±ÅŸ baÄŸlantÄ±. Yeni bir ÅŸifre sÄ±fÄ±rlama isteÄŸi gÃ¶nderin.',\r\n\r\n        // Session errors\r\n        'auth/requires-recent-login': 'Bu iÅŸlem iÃ§in yeniden giriÅŸ yapmanÄ±z gerekiyor.',\r\n        'auth/user-token-expired': 'Oturumunuzun sÃ¼resi doldu. LÃ¼tfen tekrar giriÅŸ yapÄ±n.',\r\n\r\n        // Missing information\r\n        'auth/missing-email': 'LÃ¼tfen email adresinizi girin.',\r\n        'auth/missing-password': 'LÃ¼tfen ÅŸifrenizi girin.',\r\n\r\n        // Internal errors\r\n        'auth/internal-error': 'Bir sistem hatasÄ± oluÅŸtu. LÃ¼tfen daha sonra tekrar deneyin.',\r\n        'auth/invalid-api-key': 'GeÃ§ersiz API anahtarÄ±. LÃ¼tfen yÃ¶netici ile iletiÅŸime geÃ§in.',\r\n        'auth/app-deleted': 'Uygulama yapÄ±landÄ±rmasÄ± bulunamadÄ±.',\r\n    };\r\n\r\n    return errorMessages[errorCode] || 'Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.';\r\n}\r\n\r\n/**\r\n * Mevcut kullanÄ±cÄ±yÄ± al\r\n */\r\nexport function getCurrentUser(): User | null {\r\n    return auth.currentUser;\r\n}\r\n","import {\r\n    doc,\r\n    getDoc,\r\n    setDoc,\r\n    updateDoc,\r\n    Timestamp,\r\n    serverTimestamp\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\nimport { UserProfile } from '@/interfaces/User';\r\nimport { getUserBadge, BADGES } from '@/interfaces/Badge';\r\nimport { User } from 'firebase/auth';\r\n\r\n/**\r\n * Yeni kullanÄ±cÄ± profili oluÅŸtur\r\n */\r\nexport async function createUserProfile(user: User): Promise<UserProfile> {\r\n    const initialBadge = BADGES[0]; // Ä°lk rozet\r\n\r\n    const userProfile: UserProfile = {\r\n        uid: user.uid,\r\n        email: user.email || '',\r\n        displayName: user.displayName || 'KullanÄ±cÄ±',\r\n        photoURL: user.photoURL,\r\n        totalWins: 0,\r\n        xp: 0,\r\n        currentBadge: initialBadge.name,\r\n        createdAt: Timestamp.now(),\r\n        lastUpdated: Timestamp.now()\r\n    };\r\n\r\n    try {\r\n        await setDoc(doc(db, 'users', user.uid), userProfile);\r\n        return userProfile;\r\n    } catch (error) {\r\n        console.error('Error creating user profile:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * KullanÄ±cÄ± profilini getir\r\n */\r\nexport async function getUserProfile(uid: string): Promise<UserProfile | null> {\r\n    try {\r\n        const docRef = doc(db, 'users', uid);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        if (docSnap.exists()) {\r\n            return docSnap.data() as UserProfile;\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        console.error('Error getting user profile:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * KullanÄ±cÄ±nÄ±n XP'sini artÄ±r ve rozetini gÃ¼ncelle\r\n */\r\nexport async function updateUserXP(uid: string, amount: number): Promise<{ newBadge: boolean; badge: string }> {\r\n    try {\r\n        const profile = await getUserProfile(uid);\r\n        if (!profile) {\r\n            throw new Error('User profile not found');\r\n        }\r\n\r\n        const currentXP = profile.xp || 0;\r\n        const oldBadge = getUserBadge(currentXP);\r\n        const newXP = currentXP + amount;\r\n        const newBadge = getUserBadge(newXP);\r\n\r\n        await updateDoc(doc(db, 'users', uid), {\r\n            xp: newXP,\r\n            currentBadge: newBadge.name,\r\n            lastUpdated: serverTimestamp()\r\n        });\r\n\r\n        return {\r\n            newBadge: oldBadge.id !== newBadge.id,\r\n            badge: newBadge.name\r\n        };\r\n    } catch (error) {\r\n        console.error('Error updating user XP:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * Auth user ile Firestore user'Ä± senkronize et\r\n * EÄŸer profil yoksa oluÅŸtur, varsa gÃ¼ncelle\r\n */\r\nexport async function syncUserProfile(user: User): Promise<UserProfile> {\r\n    try {\r\n        let profile = await getUserProfile(user.uid);\r\n\r\n        if (!profile) {\r\n            // Profil yoksa oluÅŸtur\r\n            profile = await createUserProfile(user);\r\n        } else {\r\n            // Profil varsa sadece temel bilgileri gÃ¼ncelle (rozet ve wins deÄŸiÅŸmez)\r\n            await updateDoc(doc(db, 'users', user.uid), {\r\n                email: user.email || profile.email,\r\n                displayName: user.displayName || profile.displayName,\r\n                photoURL: user.photoURL,\r\n                lastUpdated: serverTimestamp()\r\n            });\r\n\r\n            // GÃ¼ncellenmiÅŸ profili getir\r\n            profile = await getUserProfile(user.uid) || profile;\r\n        }\r\n\r\n        return profile;\r\n    } catch (error) {\r\n        console.error('Error syncing user profile:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * KullanÄ±cÄ± profilini manuel gÃ¼ncelle\r\n */\r\nexport async function updateUserProfile(\r\n    uid: string,\r\n    updates: Partial<Omit<UserProfile, 'uid' | 'createdAt'>>\r\n): Promise<void> {\r\n    try {\r\n        await updateDoc(doc(db, 'users', uid), {\r\n            ...updates,\r\n            lastUpdated: serverTimestamp()\r\n        });\r\n    } catch (error) {\r\n        console.error('Error updating user profile:', error);\r\n        throw error;\r\n    }\r\n}\r\n","import {\r\n    collection,\r\n    doc,\r\n    addDoc,\r\n    getDoc,\r\n    getDocs,\r\n    updateDoc,\r\n    deleteDoc,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    limit,\r\n    Timestamp,\r\n    onSnapshot,\r\n    Unsubscribe\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\n\r\n// Bildirim tipleri\r\nexport type NotificationType =\r\n    | 'comment'\r\n    | 'reply'\r\n    | 'like'\r\n    | 'favorite'\r\n    | 'new_follower'\r\n    | 'badge_earned'\r\n    | 'story_published';\r\n\r\nexport interface Notification {\r\n    id: string;\r\n    userId: string;          // Bildirimi alacak kullanÄ±cÄ±\r\n    type: NotificationType;\r\n    actorId?: string;        // Ä°ÅŸlemi yapan kullanÄ±cÄ± (opsiyonel)\r\n    actorName?: string;\r\n    actorAvatar?: string;\r\n    storyId?: string;\r\n    storyTitle?: string;\r\n    commentId?: string;      // Yorum bildirimleri iÃ§in\r\n    badgeName?: string;      // Rozet bildirimleri iÃ§in\r\n    message: string;\r\n    read: boolean;\r\n    createdAt: Date;\r\n    actionUrl?: string;      // TÄ±klanÄ±nca gidilecek URL\r\n    icon?: string;           // Emoji icon\r\n}\r\n\r\n// Firestore koleksiyon referansÄ±\r\nconst notificationsCollection = collection(db, 'notifications');\r\n\r\n// Yeni bildirim oluÅŸtur\r\nexport async function createNotification(data: Omit<Notification, 'id' | 'createdAt' | 'read'>): Promise<string> {\r\n    try {\r\n        // Kendi kendine bildirim gÃ¶nderme\r\n        if (data.userId === data.actorId) {\r\n            return '';\r\n        }\r\n\r\n        const docRef = await addDoc(notificationsCollection, {\r\n            ...data,\r\n            read: false,\r\n            createdAt: Timestamp.now()\r\n        });\r\n\r\n        return docRef.id;\r\n    } catch (error) {\r\n        console.error('Error creating notification:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// KullanÄ±cÄ±nÄ±n bildirimlerini getir\r\nexport async function getUserNotifications(userId: string, limitCount: number = 20): Promise<Notification[]> {\r\n    try {\r\n        const q = query(\r\n            notificationsCollection,\r\n            where('userId', '==', userId),\r\n            orderBy('createdAt', 'desc'),\r\n            limit(limitCount)\r\n        );\r\n\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            createdAt: doc.data().createdAt?.toDate() || new Date()\r\n        })) as Notification[];\r\n    } catch (error) {\r\n        console.error('Error fetching notifications:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\n// Bildirimi okundu iÅŸaretle\r\nexport async function markAsRead(notificationId: string): Promise<void> {\r\n    try {\r\n        const notificationRef = doc(db, 'notifications', notificationId);\r\n        await updateDoc(notificationRef, {\r\n            read: true\r\n        });\r\n    } catch (error) {\r\n        console.error('Error marking notification as read:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// TÃ¼m bildirimleri okundu iÅŸaretle\r\nexport async function markAllAsRead(userId: string): Promise<void> {\r\n    try {\r\n        const q = query(\r\n            notificationsCollection,\r\n            where('userId', '==', userId),\r\n            where('read', '==', false)\r\n        );\r\n\r\n        const querySnapshot = await getDocs(q);\r\n        const updatePromises = querySnapshot.docs.map(doc =>\r\n            updateDoc(doc.ref, { read: true })\r\n        );\r\n\r\n        await Promise.all(updatePromises);\r\n    } catch (error) {\r\n        console.error('Error marking all notifications as read:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// OkunmamÄ±ÅŸ bildirim sayÄ±sÄ±nÄ± getir\r\nexport async function getUnreadCount(userId: string): Promise<number> {\r\n    try {\r\n        const q = query(\r\n            notificationsCollection,\r\n            where('userId', '==', userId),\r\n            where('read', '==', false)\r\n        );\r\n\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.size;\r\n    } catch (error) {\r\n        console.error('Error getting unread count:', error);\r\n        return 0;\r\n    }\r\n}\r\n\r\n// Bildirimi sil\r\nexport async function deleteNotification(notificationId: string): Promise<void> {\r\n    try {\r\n        const notificationRef = doc(db, 'notifications', notificationId);\r\n        await deleteDoc(notificationRef);\r\n    } catch (error) {\r\n        console.error('Error deleting notification:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// Real-time bildirim dinleyicisi\r\nexport function subscribeToNotifications(\r\n    userId: string,\r\n    callback: (notifications: Notification[]) => void\r\n): Unsubscribe {\r\n    const q = query(\r\n        notificationsCollection,\r\n        where('userId', '==', userId),\r\n        orderBy('createdAt', 'desc'),\r\n        limit(20)\r\n    );\r\n\r\n    return onSnapshot(q, (querySnapshot) => {\r\n        const notifications = querySnapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            createdAt: doc.data().createdAt?.toDate() || new Date()\r\n        })) as Notification[];\r\n\r\n        callback(notifications);\r\n    }, (error) => {\r\n        console.error('Error in notification subscription:', error);\r\n    });\r\n}\r\n\r\n// GÃ¶receli zaman formatÄ± (Ã¶rn: \"5 dakika Ã¶nce\")\r\nexport function getRelativeTime(date: Date): string {\r\n    const now = new Date();\r\n    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\r\n\r\n    if (diffInSeconds < 60) {\r\n        return 'Az Ã¶nce';\r\n    }\r\n\r\n    const diffInMinutes = Math.floor(diffInSeconds / 60);\r\n    if (diffInMinutes < 60) {\r\n        return `${diffInMinutes} dakika Ã¶nce`;\r\n    }\r\n\r\n    const diffInHours = Math.floor(diffInMinutes / 60);\r\n    if (diffInHours < 24) {\r\n        return `${diffInHours} saat Ã¶nce`;\r\n    }\r\n\r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n    if (diffInDays < 7) {\r\n        return `${diffInDays} gÃ¼n Ã¶nce`;\r\n    }\r\n\r\n    const diffInWeeks = Math.floor(diffInDays / 7);\r\n    if (diffInWeeks < 4) {\r\n        return `${diffInWeeks} hafta Ã¶nce`;\r\n    }\r\n\r\n    const diffInMonths = Math.floor(diffInDays / 30);\r\n    if (diffInMonths < 12) {\r\n        return `${diffInMonths} ay Ã¶nce`;\r\n    }\r\n\r\n    const diffInYears = Math.floor(diffInDays / 365);\r\n    return `${diffInYears} yÄ±l Ã¶nce`;\r\n}\r\n\r\n// ============================================\r\n// NOTIFICATION HELPERS\r\n// ============================================\r\n\r\n/**\r\n * Takip bildirimi oluÅŸtur\r\n */\r\nexport async function createFollowNotification(\r\n    followedUserId: string,\r\n    followerId: string,\r\n    followerName: string,\r\n    followerAvatar: string\r\n): Promise<string> {\r\n    return createNotification({\r\n        userId: followedUserId,\r\n        type: 'new_follower',\r\n        actorId: followerId,\r\n        actorName: followerName,\r\n        actorAvatar: followerAvatar,\r\n        message: `${followerName} sizi takip etmeye baÅŸladÄ±`,\r\n        actionUrl: `/profile/${followerId}`,\r\n        icon: 'ðŸ‘¥'\r\n    });\r\n}\r\n\r\n/**\r\n * Rozet kazanma bildirimi oluÅŸtur\r\n */\r\nexport async function createBadgeNotification(\r\n    userId: string,\r\n    badgeName: string,\r\n    badgeEmoji: string\r\n): Promise<string> {\r\n    return createNotification({\r\n        userId,\r\n        type: 'badge_earned',\r\n        badgeName,\r\n        message: `Tebrikler! \"${badgeName}\" rozetini kazandÄ±nÄ±z!`,\r\n        actionUrl: `/profile/${userId}`,\r\n        icon: badgeEmoji\r\n    });\r\n}\r\n\r\n/**\r\n * Hikaye yayÄ±nlama bildirimi (takipÃ§ilere)\r\n */\r\nexport async function notifyFollowersAboutNewStory(\r\n    authorId: string,\r\n    authorName: string,\r\n    authorAvatar: string,\r\n    storyId: string,\r\n    storyTitle: string,\r\n    followerIds: string[]\r\n): Promise<void> {\r\n    try {\r\n        const promises = followerIds.map(followerId =>\r\n            createNotification({\r\n                userId: followerId,\r\n                type: 'story_published',\r\n                actorId: authorId,\r\n                actorName: authorName,\r\n                actorAvatar: authorAvatar,\r\n                storyId,\r\n                storyTitle,\r\n                message: `${authorName} yeni bir hikaye yayÄ±nladÄ±: \"${storyTitle}\"`,\r\n                actionUrl: `/story/${storyId}`,\r\n                icon: 'ðŸ“š'\r\n            })\r\n        );\r\n\r\n        await Promise.all(promises);\r\n    } catch (error) {\r\n        console.error('Error notifying followers:', error);\r\n    }\r\n}\r\n"],"names":["DEFAULT_SEGMENT_KEY","PAGE_SEGMENT_KEY","addSearchParamsIfPageSegment","computeSelectedLayoutSegment","getSegmentValue","getSelectedLayoutSegmentPath","isGroupSegment","isParallelRouteSegment","segment","Array","isArray","endsWith","startsWith","searchParams","isPageSegment","includes","stringifiedQuery","JSON","stringify","segments","parallelRouteKey","length","rawSegment","tree","first","segmentPath","node","parallelRoutes","children","Object","values","segmentValue","push","createPromiseWithResolvers","resolve","reject","promise","Promise","res","rej"],"mappings":"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","ignoreList":[1,2,3]}