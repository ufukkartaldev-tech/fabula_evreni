{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/lib/firebase.ts"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAnalytics } from \"firebase/analytics\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getAuth, setPersistence, browserLocalPersistence, browserSessionPersistence } from \"firebase/auth\";\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyC_2kv4plQXsi_eftZcihhywv6msdZhdM4\",\r\n    authDomain: \"fabula-e9d7e.firebaseapp.com\",\r\n    projectId: \"fabula-e9d7e\",\r\n    storageBucket: \"fabula-e9d7e.firebasestorage.app\",\r\n    messagingSenderId: \"296753282882\",\r\n    appId: \"1:296753282882:web:a824ee7c48d116cc3892db\",\r\n    measurementId: \"G-MGW3LP57MJ\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n// Initialize Analytics (only in browser)\r\nlet analytics;\r\nif (typeof window !== 'undefined') {\r\n    analytics = getAnalytics(app);\r\n}\r\n\r\n// Initialize Firestore\r\nconst db = getFirestore(app);\r\n\r\n// Initialize Auth\r\nconst auth = getAuth(app);\r\n\r\n// Set default persistence to session (will be changed based on \"Remember Me\")\r\nif (typeof window !== 'undefined') {\r\n    setPersistence(auth, browserSessionPersistence).catch((error) => {\r\n        console.error('Error setting persistence:', error);\r\n    });\r\n}\r\n\r\nexport { app, analytics, db, auth, setPersistence, browserLocalPersistence, browserSessionPersistence };\r\n"],"names":[],"mappings":"AAAA,uDAAuD;;;;;;;;;;;AACvD;AAAA;AACA;AACA;AAAA;AACA;AAAA;;;;;AAEA,wCAAwC;AACxC,mEAAmE;AACnE,MAAM,iBAAiB;IACnB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACnB;AAEA,sBAAsB;AACtB,MAAM,MAAM,IAAA,iLAAa,EAAC;AAE1B,yCAAyC;AACzC,IAAI;AACJ;;AAIA,uBAAuB;AACvB,MAAM,KAAK,IAAA,iLAAY,EAAC;AAExB,kBAAkB;AAClB,MAAM,OAAO,IAAA,6KAAO,EAAC;AAErB,8EAA8E;AAC9E"}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/lib/firestore.ts"],"sourcesContent":["import {\r\n    collection,\r\n    addDoc,\r\n    getDocs,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    Timestamp,\r\n    DocumentData\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\nimport { Story } from '@/interfaces/Story';\r\nimport { Comment } from '@/interfaces/Comment';\r\n\r\n// Firestore koleksiyon referanslarƒ±\r\nconst storiesCollection = collection(db, 'stories');\r\nconst commentsCollection = collection(db, 'comments');\r\n\r\n// Hikayeleri getir\r\nexport async function getStories(): Promise<Story[]> {\r\n    try {\r\n        const q = query(storiesCollection, orderBy('createdAt', 'desc'));\r\n        const querySnapshot = await getDocs(q);\r\n\r\n        return querySnapshot.docs.map(doc => {\r\n            const data = doc.data();\r\n            return {\r\n                id: doc.id,\r\n                ...data,\r\n                createdAt: data.createdAt?.toDate() || new Date(),\r\n            } as Story;\r\n        });\r\n    } catch (error) {\r\n        console.error('Error fetching stories:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\n// Tek bir hikaye getir\r\nexport async function getStoryById(id: string): Promise<Story | null> {\r\n    try {\r\n        const stories = await getStories();\r\n        return stories.find(story => story.id === id) || null;\r\n    } catch (error) {\r\n        console.error('Error fetching story:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\n// Bir hikayeye ait yorumlarƒ± getir\r\nexport async function getCommentsByStoryId(storyId: string): Promise<Comment[]> {\r\n    try {\r\n        const q = query(\r\n            commentsCollection,\r\n            where('storyId', '==', storyId),\r\n            orderBy('createdAt', 'desc')\r\n        );\r\n        const querySnapshot = await getDocs(q);\r\n\r\n        const comments = querySnapshot.docs.map(doc => {\r\n            const data = doc.data();\r\n            return {\r\n                id: doc.id,\r\n                ...data,\r\n                createdAt: data.createdAt?.toDate() || new Date(),\r\n            } as Comment;\r\n        });\r\n\r\n        // Nested yorumlarƒ± organize et\r\n        return organizeComments(comments);\r\n    } catch (error) {\r\n        console.error('Error fetching comments:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\n// Yorumlarƒ± nested yapƒ±ya d√∂n√º≈üt√ºr\r\nfunction organizeComments(comments: Comment[]): Comment[] {\r\n    const commentMap = new Map<string, Comment>();\r\n    const rootComments: Comment[] = [];\r\n\r\n    // T√ºm yorumlarƒ± map'e ekle\r\n    comments.forEach(comment => {\r\n        commentMap.set(comment.id, { ...comment, replies: [] });\r\n    });\r\n\r\n    // Nested yapƒ±yƒ± olu≈ütur\r\n    comments.forEach(comment => {\r\n        const commentWithReplies = commentMap.get(comment.id);\r\n        if (commentWithReplies) {\r\n            // Eƒüer parent yoksa root comment\r\n            rootComments.push(commentWithReplies);\r\n        }\r\n    });\r\n\r\n    return rootComments;\r\n}\r\n\r\n// Yeni yorum ekle\r\nexport async function addComment(comment: Omit<Comment, 'id' | 'createdAt'>): Promise<string> {\r\n    try {\r\n        const docRef = await addDoc(commentsCollection, {\r\n            ...comment,\r\n            createdAt: Timestamp.now(),\r\n        });\r\n        return docRef.id;\r\n    } catch (error) {\r\n        console.error('Error adding comment:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// Yeni hikaye ekle\r\nexport async function addStory(story: Omit<Story, 'id' | 'createdAt'>): Promise<string> {\r\n    try {\r\n        const docRef = await addDoc(storiesCollection, {\r\n            ...story,\r\n            createdAt: Timestamp.now(),\r\n        });\r\n        return docRef.id;\r\n    } catch (error) {\r\n        console.error('Error adding story:', error);\r\n        throw error;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AAUA;;;AAIA,oCAAoC;AACpC,MAAM,oBAAoB,IAAA,+KAAU,EAAC,4IAAE,EAAE;AACzC,MAAM,qBAAqB,IAAA,+KAAU,EAAC,4IAAE,EAAE;AAGnC,eAAe;IAClB,IAAI;QACA,MAAM,IAAI,IAAA,0KAAK,EAAC,mBAAmB,IAAA,4KAAO,EAAC,aAAa;QACxD,MAAM,gBAAgB,MAAM,IAAA,4KAAO,EAAC;QAEpC,OAAO,cAAc,IAAI,CAAC,GAAG,CAAC,CAAA;YAC1B,MAAM,OAAO,IAAI,IAAI;YACrB,OAAO;gBACH,IAAI,IAAI,EAAE;gBACV,GAAG,IAAI;gBACP,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;YAC/C;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,EAAE;IACb;AACJ;AAGO,eAAe,aAAa,EAAU;IACzC,IAAI;QACA,MAAM,UAAU,MAAM;QACtB,OAAO,QAAQ,IAAI,CAAC,CAAA,QAAS,MAAM,EAAE,KAAK,OAAO;IACrD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO;IACX;AACJ;AAGO,eAAe,qBAAqB,OAAe;IACtD,IAAI;QACA,MAAM,IAAI,IAAA,0KAAK,EACX,oBACA,IAAA,0KAAK,EAAC,WAAW,MAAM,UACvB,IAAA,4KAAO,EAAC,aAAa;QAEzB,MAAM,gBAAgB,MAAM,IAAA,4KAAO,EAAC;QAEpC,MAAM,WAAW,cAAc,IAAI,CAAC,GAAG,CAAC,CAAA;YACpC,MAAM,OAAO,IAAI,IAAI;YACrB,OAAO;gBACH,IAAI,IAAI,EAAE;gBACV,GAAG,IAAI;gBACP,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;YAC/C;QACJ;QAEA,+BAA+B;QAC/B,OAAO,iBAAiB;IAC5B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,EAAE;IACb;AACJ;AAEA,mCAAmC;AACnC,SAAS,iBAAiB,QAAmB;IACzC,MAAM,aAAa,IAAI;IACvB,MAAM,eAA0B,EAAE;IAElC,2BAA2B;IAC3B,SAAS,OAAO,CAAC,CAAA;QACb,WAAW,GAAG,CAAC,QAAQ,EAAE,EAAE;YAAE,GAAG,OAAO;YAAE,SAAS,EAAE;QAAC;IACzD;IAEA,wBAAwB;IACxB,SAAS,OAAO,CAAC,CAAA;QACb,MAAM,qBAAqB,WAAW,GAAG,CAAC,QAAQ,EAAE;QACpD,IAAI,oBAAoB;YACpB,iCAAiC;YACjC,aAAa,IAAI,CAAC;QACtB;IACJ;IAEA,OAAO;AACX;AAGO,eAAe,WAAW,OAA0C;IACvE,IAAI;QACA,MAAM,SAAS,MAAM,IAAA,2KAAM,EAAC,oBAAoB;YAC5C,GAAG,OAAO;YACV,WAAW,8KAAS,CAAC,GAAG;QAC5B;QACA,OAAO,OAAO,EAAE;IACpB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM;IACV;AACJ;AAGO,eAAe,SAAS,KAAsC;IACjE,IAAI;QACA,MAAM,SAAS,MAAM,IAAA,2KAAM,EAAC,mBAAmB;YAC3C,GAAG,KAAK;YACR,WAAW,8KAAS,CAAC,GAAG;QAC5B;QACA,OAAO,OAAO,EAAE;IACpB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,uBAAuB;QACrC,MAAM;IACV;AACJ"}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/app/components/CommentCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Comment } from '@/interfaces/Comment';\r\n\r\ninterface CommentCardProps {\r\n    comment: Comment;\r\n    depth?: number;\r\n}\r\n\r\nexport default function CommentCard({ comment, depth = 0 }: CommentCardProps) {\r\n    const marginLeft = depth > 0 ? `${depth * 2}rem` : '0';\r\n\r\n    const formatDate = (date: Date) => {\r\n        const now = new Date();\r\n        const diffInMs = now.getTime() - date.getTime();\r\n        const diffInHours = Math.floor(diffInMs / (1000 * 60 * 60));\r\n        const diffInDays = Math.floor(diffInHours / 24);\r\n\r\n        if (diffInHours < 1) return 'Az √∂nce';\r\n        if (diffInHours < 24) return `${diffInHours} saat √∂nce`;\r\n        if (diffInDays < 7) return `${diffInDays} g√ºn √∂nce`;\r\n\r\n        return date.toLocaleDateString('tr-TR', {\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric'\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div style={{ marginLeft }} className=\"comment-card-wrapper\">\r\n            <div className=\"comment-card\">\r\n                <div className=\"comment-header\">\r\n                    <div className=\"comment-author\">\r\n                        <span className=\"author-avatar\">{comment.author.avatar}</span>\r\n                        <div className=\"author-info\">\r\n                            <span className=\"author-name\">{comment.author.name}</span>\r\n                            <span className=\"comment-date\">{formatDate(comment.createdAt)}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <p className=\"comment-content\">{comment.content}</p>\r\n\r\n                <button className=\"reply-button\">\r\n                    <span>üí¨</span>\r\n                    Yanƒ±tla\r\n                </button>\r\n            </div>\r\n\r\n            {comment.replies && comment.replies.length > 0 && (\r\n                <div className=\"comment-replies\">\r\n                    {comment.replies.map((reply) => (\r\n                        <CommentCard key={reply.id} comment={reply} depth={depth + 1} />\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AASe,SAAS,YAAY,EAAE,OAAO,EAAE,QAAQ,CAAC,EAAoB;IACxE,MAAM,aAAa,QAAQ,IAAI,GAAG,QAAQ,EAAE,GAAG,CAAC,GAAG;IAEnD,MAAM,aAAa,CAAC;QAChB,MAAM,MAAM,IAAI;QAChB,MAAM,WAAW,IAAI,OAAO,KAAK,KAAK,OAAO;QAC7C,MAAM,cAAc,KAAK,KAAK,CAAC,WAAW,CAAC,OAAO,KAAK,EAAE;QACzD,MAAM,aAAa,KAAK,KAAK,CAAC,cAAc;QAE5C,IAAI,cAAc,GAAG,OAAO;QAC5B,IAAI,cAAc,IAAI,OAAO,GAAG,YAAY,UAAU,CAAC;QACvD,IAAI,aAAa,GAAG,OAAO,GAAG,WAAW,SAAS,CAAC;QAEnD,OAAO,KAAK,kBAAkB,CAAC,SAAS;YACpC,MAAM;YACN,OAAO;YACP,KAAK;QACT;IACJ;IAEA,qBACI,8OAAC;QAAI,OAAO;YAAE;QAAW;QAAG,WAAU;;0BAClC,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAK,WAAU;8CAAiB,QAAQ,MAAM,CAAC,MAAM;;;;;;8CACtD,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAK,WAAU;sDAAe,QAAQ,MAAM,CAAC,IAAI;;;;;;sDAClD,8OAAC;4CAAK,WAAU;sDAAgB,WAAW,QAAQ,SAAS;;;;;;;;;;;;;;;;;;;;;;;kCAKxE,8OAAC;wBAAE,WAAU;kCAAmB,QAAQ,OAAO;;;;;;kCAE/C,8OAAC;wBAAO,WAAU;;0CACd,8OAAC;0CAAK;;;;;;4BAAS;;;;;;;;;;;;;YAKtB,QAAQ,OAAO,IAAI,QAAQ,OAAO,CAAC,MAAM,GAAG,mBACzC,8OAAC;gBAAI,WAAU;0BACV,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,sBAClB,8OAAC;wBAA2B,SAAS;wBAAO,OAAO,QAAQ;uBAAzC,MAAM,EAAE;;;;;;;;;;;;;;;;AAMlD"}},
    {"offset": {"line": 421, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/app/components/CommentForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\n\r\ninterface CommentFormProps {\r\n    onSubmit: (content: string) => void;\r\n    placeholder?: string;\r\n    disabled?: boolean;\r\n}\r\n\r\nexport default function CommentForm({\r\n    onSubmit,\r\n    placeholder = 'Yorumunuzu yazƒ±n...',\r\n    disabled = false\r\n}: CommentFormProps) {\r\n    const [content, setContent] = useState('');\r\n    const maxLength = 500;\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (content.trim() && content.length <= maxLength) {\r\n            onSubmit(content.trim());\r\n            setContent('');\r\n        }\r\n    };\r\n\r\n    const remainingChars = maxLength - content.length;\r\n    const isNearLimit = remainingChars < 50;\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"comment-form\">\r\n            <div className=\"form-header\">\r\n                <h3>üí¨ Yorum Yap</h3>\r\n            </div>\r\n\r\n            <textarea\r\n                value={content}\r\n                onChange={(e) => setContent(e.target.value)}\r\n                placeholder={placeholder}\r\n                maxLength={maxLength}\r\n                rows={4}\r\n                className=\"comment-textarea\"\r\n                disabled={disabled}\r\n            />\r\n\r\n            <div className=\"form-footer\">\r\n                <span className={`char-counter ${isNearLimit ? 'warning' : ''}`}>\r\n                    {remainingChars} karakter kaldƒ±\r\n                </span>\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={!content.trim() || content.length > maxLength || disabled}\r\n                    className=\"submit-button\"\r\n                >\r\n                    <span>üì§</span>\r\n                    {disabled ? 'G√∂nderiliyor...' : 'G√∂nder'}\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUe,SAAS,YAAY,EAChC,QAAQ,EACR,cAAc,qBAAqB,EACnC,WAAW,KAAK,EACD;IACf,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,YAAY;IAElB,MAAM,eAAe,CAAC;QAClB,EAAE,cAAc;QAChB,IAAI,QAAQ,IAAI,MAAM,QAAQ,MAAM,IAAI,WAAW;YAC/C,SAAS,QAAQ,IAAI;YACrB,WAAW;QACf;IACJ;IAEA,MAAM,iBAAiB,YAAY,QAAQ,MAAM;IACjD,MAAM,cAAc,iBAAiB;IAErC,qBACI,8OAAC;QAAK,UAAU;QAAc,WAAU;;0BACpC,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;8BAAG;;;;;;;;;;;0BAGR,8OAAC;gBACG,OAAO;gBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gBAC1C,aAAa;gBACb,WAAW;gBACX,MAAM;gBACN,WAAU;gBACV,UAAU;;;;;;0BAGd,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAK,WAAW,CAAC,aAAa,EAAE,cAAc,YAAY,IAAI;;4BAC1D;4BAAe;;;;;;;kCAGpB,8OAAC;wBACG,MAAK;wBACL,UAAU,CAAC,QAAQ,IAAI,MAAM,QAAQ,MAAM,GAAG,aAAa;wBAC3D,WAAU;;0CAEV,8OAAC;0CAAK;;;;;;4BACL,WAAW,oBAAoB;;;;;;;;;;;;;;;;;;;AAKpD"}},
    {"offset": {"line": 523, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/app/components/CommentSection.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Comment } from '@/interfaces/Comment';\r\nimport { addComment, getCommentsByStoryId } from '@/lib/firestore';\r\nimport CommentCard from './CommentCard';\r\nimport CommentForm from './CommentForm';\r\n\r\ninterface CommentSectionProps {\r\n    storyId: string;\r\n    initialComments: Comment[];\r\n}\r\n\r\nexport default function CommentSection({ storyId, initialComments }: CommentSectionProps) {\r\n    const [comments, setComments] = useState<Comment[]>(initialComments);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const handleAddComment = async (content: string) => {\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            const newComment: Omit<Comment, 'id' | 'createdAt'> = {\r\n                storyId,\r\n                author: {\r\n                    name: 'Misafir Kullanƒ±cƒ±',\r\n                    avatar: 'üë§'\r\n                },\r\n                content,\r\n                replies: []\r\n            };\r\n\r\n            // Firestore'a ekle\r\n            await addComment(newComment);\r\n\r\n            // Yorumlarƒ± yeniden y√ºkle\r\n            const updatedComments = await getCommentsByStoryId(storyId);\r\n            setComments(updatedComments);\r\n        } catch (error) {\r\n            console.error('Error adding comment:', error);\r\n            alert('Yorum eklenirken bir hata olu≈ütu. L√ºtfen tekrar deneyin.');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"comment-section\">\r\n            <div className=\"section-header\">\r\n                <h2>üí¨ Yorumlar</h2>\r\n                <span className=\"comment-count\">{comments.length} yorum</span>\r\n            </div>\r\n\r\n            <CommentForm onSubmit={handleAddComment} disabled={isSubmitting} />\r\n\r\n            <div className=\"comments-list\">\r\n                {comments.length === 0 ? (\r\n                    <div className=\"empty-state\">\r\n                        <span className=\"empty-icon\">üí≠</span>\r\n                        <p>Hen√ºz yorum yapƒ±lmamƒ±≈ü. ƒ∞lk yorumu siz yapƒ±n!</p>\r\n                    </div>\r\n                ) : (\r\n                    comments.map((comment) => (\r\n                        <CommentCard key={comment.id} comment={comment} />\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AANA;;;;;;AAae,SAAS,eAAe,EAAE,OAAO,EAAE,eAAe,EAAuB;IACpF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY;IACpD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,MAAM,mBAAmB,OAAO;QAC5B,gBAAgB;QAEhB,IAAI;YACA,MAAM,aAAgD;gBAClD;gBACA,QAAQ;oBACJ,MAAM;oBACN,QAAQ;gBACZ;gBACA;gBACA,SAAS,EAAE;YACf;YAEA,mBAAmB;YACnB,MAAM,IAAA,qIAAU,EAAC;YAEjB,0BAA0B;YAC1B,MAAM,kBAAkB,MAAM,IAAA,+IAAoB,EAAC;YACnD,YAAY;QAChB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,MAAM;QACV,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;kCAAG;;;;;;kCACJ,8OAAC;wBAAK,WAAU;;4BAAiB,SAAS,MAAM;4BAAC;;;;;;;;;;;;;0BAGrD,8OAAC,mJAAW;gBAAC,UAAU;gBAAkB,UAAU;;;;;;0BAEnD,8OAAC;gBAAI,WAAU;0BACV,SAAS,MAAM,KAAK,kBACjB,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAK,WAAU;sCAAa;;;;;;sCAC7B,8OAAC;sCAAE;;;;;;;;;;;2BAGP,SAAS,GAAG,CAAC,CAAC,wBACV,8OAAC,mJAAW;wBAAkB,SAAS;uBAArB,QAAQ,EAAE;;;;;;;;;;;;;;;;AAMpD"}},
    {"offset": {"line": 651, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/app/story/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { notFound } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { Story } from '@/interfaces/Story';\r\nimport { Comment } from '@/interfaces/Comment';\r\nimport { getStoryById, getCommentsByStoryId } from '@/lib/firestore';\r\nimport CommentSection from '@/app/components/CommentSection';\r\n\r\ninterface StoryPageProps {\r\n    params: Promise<{ id: string }>;\r\n}\r\n\r\nexport default function StoryPage({ params }: StoryPageProps) {\r\n    const [id, setId] = useState<string>('');\r\n    const [story, setStory] = useState<Story | null>(null);\r\n    const [comments, setComments] = useState<Comment[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        async function loadParams() {\r\n            const resolvedParams = await params;\r\n            setId(resolvedParams.id);\r\n        }\r\n        loadParams();\r\n    }, [params]);\r\n\r\n    useEffect(() => {\r\n        if (!id) return;\r\n\r\n        async function fetchData() {\r\n            try {\r\n                const [fetchedStory, fetchedComments] = await Promise.all([\r\n                    getStoryById(id),\r\n                    getCommentsByStoryId(id)\r\n                ]);\r\n\r\n                if (!fetchedStory) {\r\n                    notFound();\r\n                    return;\r\n                }\r\n\r\n                setStory(fetchedStory);\r\n                setComments(fetchedComments);\r\n            } catch (error) {\r\n                console.error('Error loading story:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        fetchData();\r\n    }, [id]);\r\n\r\n    const formatDate = (date: Date) => {\r\n        return date.toLocaleDateString('tr-TR', {\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric'\r\n        });\r\n    };\r\n\r\n    const formatNumber = (num: number) => {\r\n        if (num >= 1000) {\r\n            return `${(num / 1000).toFixed(1)}k`;\r\n        }\r\n        return num.toString();\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"story-page\">\r\n                <div className=\"story-container\">\r\n                    <div className=\"loading-state\">\r\n                        <div className=\"spinner\"></div>\r\n                        <p>Hikaye y√ºkleniyor...</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!story) {\r\n        notFound();\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className=\"story-page\">\r\n            <div className=\"story-container\">\r\n                <Link href=\"/\" className=\"back-button\">\r\n                    <span>‚Üê</span>\r\n                    Ana Sayfaya D√∂n\r\n                </Link>\r\n\r\n                <article className=\"story-article\">\r\n                    <header className=\"story-header\">\r\n                        <div className=\"story-meta\">\r\n                            <span className=\"category-badge\">{story.category}</span>\r\n                            <span className=\"story-date\">{formatDate(story.createdAt)}</span>\r\n                        </div>\r\n\r\n                        <h1 className=\"story-title\">{story.title}</h1>\r\n\r\n                        <div className=\"author-section\">\r\n                            <div className=\"author-info\">\r\n                                <span className=\"author-avatar\">{story.author.avatar}</span>\r\n                                <span className=\"author-name\">{story.author.name}</span>\r\n                            </div>\r\n\r\n                            <div className=\"story-stats\">\r\n                                <span className=\"stat\">\r\n                                    <span className=\"stat-icon\">üëÅÔ∏è</span>\r\n                                    {formatNumber(story.stats.views)} g√∂r√ºnt√ºlenme\r\n                                </span>\r\n                                <span className=\"stat\">\r\n                                    <span className=\"stat-icon\">üí¨</span>\r\n                                    {formatNumber(story.stats.comments)} yorum\r\n                                </span>\r\n                                <span className=\"stat\">\r\n                                    <span className=\"stat-icon\">‚ù§Ô∏è</span>\r\n                                    {formatNumber(story.stats.likes)} beƒüeni\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </header>\r\n\r\n                    <div className=\"story-content\">\r\n                        {story.content.split('\\n\\n').map((paragraph, index) => (\r\n                            <p key={index}>{paragraph}</p>\r\n                        ))}\r\n                    </div>\r\n                </article>\r\n\r\n                <CommentSection storyId={id} initialComments={comments} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}