{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/hooks/useAdmin.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\nexport function useAdmin() {\r\n    const { user } = useAuth();\r\n    const [isAdmin, setIsAdmin] = useState<boolean>(false);\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n\r\n    useEffect(() => {\r\n        async function checkAdminStatus() {\r\n            if (!user) {\r\n                setIsAdmin(false);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // Force token refresh to get the latest claims\r\n                const idTokenResult = await user.getIdTokenResult(true);\r\n                setIsAdmin(!!idTokenResult.claims.admin);\r\n            } catch (error) {\r\n                console.error('Error checking admin status:', error);\r\n                setIsAdmin(false);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        checkAdminStatus();\r\n    }, [user]);\r\n\r\n    return { isAdmin, loading };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS;IACZ,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,0IAAO;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAU;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAU;IAEhD,IAAA,kNAAS,EAAC;QACN,eAAe;YACX,IAAI,CAAC,MAAM;gBACP,WAAW;gBACX,WAAW;gBACX;YACJ;YAEA,IAAI;gBACA,+CAA+C;gBAC/C,MAAM,gBAAgB,MAAM,KAAK,gBAAgB,CAAC;gBAClD,WAAW,CAAC,CAAC,cAAc,MAAM,CAAC,KAAK;YAC3C,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,gCAAgC;gBAC9C,WAAW;YACf,SAAU;gBACN,WAAW;YACf;QACJ;QAEA;IACJ,GAAG;QAAC;KAAK;IAET,OAAO;QAAE;QAAS;IAAQ;AAC9B"}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/app/admin/layout.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useAdmin } from '@/hooks/useAdmin';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect } from 'react';\r\nimport Link from 'next/link';\r\n\r\nexport default function AdminLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const { isAdmin, loading } = useAdmin();\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        if (!loading && !isAdmin) {\r\n            router.push('/');\r\n        }\r\n    }, [isAdmin, loading, router]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen\">\r\n                <div className=\"spinner\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!isAdmin) {\r\n        return null; // Will redirect\r\n    }\r\n\r\n    return (\r\n        <div className=\"admin-layout flex min-h-screen bg-gray-100 dark:bg-gray-900\">\r\n            {/* Sidebar */}\r\n            <aside className=\"w-64 bg-white dark:bg-gray-800 shadow-md flex-shrink-0 hidden md:block\">\r\n                <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\r\n                    <h2 className=\"text-xl font-bold text-indigo-600 dark:text-indigo-400\">Admin Paneli</h2>\r\n                </div>\r\n                <nav className=\"p-4 space-y-2\">\r\n                    <Link href=\"/admin\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üìä Genel Bakƒ±≈ü\r\n                    </Link>\r\n                    <Link href=\"/admin/stories\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üìö Hikayeler\r\n                    </Link>\r\n                    <Link href=\"/admin/users\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üë• Kullanƒ±cƒ±lar\r\n                    </Link>\r\n                    <Link href=\"/admin/reports\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        üö© Raporlar\r\n                    </Link>\r\n                    <div className=\"border-t border-gray-200 dark:border-gray-700 my-4\"></div>\r\n                    <Link href=\"/\" className=\"block px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200\">\r\n                        ‚¨ÖÔ∏è Uygulamaya D√∂n\r\n                    </Link>\r\n                </nav>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 p-8 overflow-y-auto\">\r\n                {children}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,YAAY,EAChC,QAAQ,EAGX;IACG,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,oIAAQ;IACrC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACN,IAAI,CAAC,WAAW,CAAC,SAAS;YACtB,OAAO,IAAI,CAAC;QAChB;IACJ,GAAG;QAAC;QAAS;QAAS;KAAO;IAE7B,IAAI,SAAS;QACT,qBACI,8OAAC;YAAI,WAAU;sBACX,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAG3B;IAEA,IAAI,CAAC,SAAS;QACV,OAAO,MAAM,gBAAgB;IACjC;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAM,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAG,WAAU;sCAAyD;;;;;;;;;;;kCAE3E,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,uKAAI;gCAAC,MAAK;gCAAS,WAAU;0CAAuG;;;;;;0CAGrI,8OAAC,uKAAI;gCAAC,MAAK;gCAAiB,WAAU;0CAAuG;;;;;;0CAG7I,8OAAC,uKAAI;gCAAC,MAAK;gCAAe,WAAU;0CAAuG;;;;;;0CAG3I,8OAAC,uKAAI;gCAAC,MAAK;gCAAiB,WAAU;0CAAuG;;;;;;0CAG7I,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC,uKAAI;gCAAC,MAAK;gCAAI,WAAU;0CAAuG;;;;;;;;;;;;;;;;;;0BAOxI,8OAAC;gBAAK,WAAU;0BACX;;;;;;;;;;;;AAIjB"}}]
}