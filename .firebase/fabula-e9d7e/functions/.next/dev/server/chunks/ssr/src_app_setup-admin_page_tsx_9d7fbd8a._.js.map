{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/90538/Desktop/fabula/benim-hikaye-uygulamasi/src/app/setup-admin/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\n\r\nexport default function SetupAdminPage() {\r\n    const { user } = useAuth();\r\n    const [secret, setSecret] = useState('');\r\n    const [status, setStatus] = useState('');\r\n\r\n    const handleMakeAdmin = async () => {\r\n        if (!user) return;\r\n\r\n        setStatus('Processing...');\r\n        try {\r\n            const response = await fetch('/api/admin/set-custom-claims', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    uid: user.uid,\r\n                    action: 'grant',\r\n                    secret: secret\r\n                }),\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                setStatus('Success! You are now an admin. Please refresh the page/re-login to update claims.');\r\n            } else {\r\n                setStatus('Error: ' + data.error);\r\n            }\r\n        } catch (error) {\r\n            setStatus('Error: ' + error);\r\n        }\r\n    };\r\n\r\n    if (!user) {\r\n        return <div className=\"p-8\">Please login first.</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-8 max-w-md mx-auto\">\r\n            <h1 className=\"text-2xl font-bold mb-4\">Admin Setup</h1>\r\n            <p className=\"mb-4\">Current User: {user.email} ({user.uid})</p>\r\n\r\n            <div className=\"space-y-4\">\r\n                <div>\r\n                    <label className=\"block text-sm font-medium mb-1\">Bootstrap Secret</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        value={secret}\r\n                        onChange={(e) => setSecret(e.target.value)}\r\n                        className=\"w-full p-2 border rounded\"\r\n                    />\r\n                </div>\r\n\r\n                <button\r\n                    onClick={handleMakeAdmin}\r\n                    className=\"w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700\"\r\n                >\r\n                    Make Me Admin\r\n                </button>\r\n\r\n                {status && (\r\n                    <div className={`p-4 rounded ${status.includes('Success') ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\r\n                        {status}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACpB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,0IAAO;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,MAAM,kBAAkB;QACpB,IAAI,CAAC,MAAM;QAEX,UAAU;QACV,IAAI;YACA,MAAM,WAAW,MAAM,MAAM,gCAAgC;gBACzD,QAAQ;gBACR,SAAS;oBACL,gBAAgB;gBACpB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACjB,KAAK,KAAK,GAAG;oBACb,QAAQ;oBACR,QAAQ;gBACZ;YACJ;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,IAAI,SAAS,EAAE,EAAE;gBACb,UAAU;YACd,OAAO;gBACH,UAAU,YAAY,KAAK,KAAK;YACpC;QACJ,EAAE,OAAO,OAAO;YACZ,UAAU,YAAY;QAC1B;IACJ;IAEA,IAAI,CAAC,MAAM;QACP,qBAAO,8OAAC;YAAI,WAAU;sBAAM;;;;;;IAChC;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,8OAAC;gBAAE,WAAU;;oBAAO;oBAAe,KAAK,KAAK;oBAAC;oBAAG,KAAK,GAAG;oBAAC;;;;;;;0BAE1D,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;;0CACG,8OAAC;gCAAM,WAAU;0CAAiC;;;;;;0CAClD,8OAAC;gCACG,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;gCACzC,WAAU;;;;;;;;;;;;kCAIlB,8OAAC;wBACG,SAAS;wBACT,WAAU;kCACb;;;;;;oBAIA,wBACG,8OAAC;wBAAI,WAAW,CAAC,YAAY,EAAE,OAAO,QAAQ,CAAC,aAAa,gCAAgC,2BAA2B;kCAClH;;;;;;;;;;;;;;;;;;AAMzB"}}]
}