module.exports=[16588,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(10123);function f({rank:a,type:c,data:f}){let g=a=>{switch(a){case 1:return"ðŸ¥‡";case 2:return"ðŸ¥ˆ";case 3:return"ðŸ¥‰";default:return`${a}.`}};if("story"===c)return(0,b.jsxs)(d.default,{href:`/story/${f.id}`,className:"leaderboard-card",children:[(0,b.jsx)("div",{className:"rank-badge",children:g(a)}),(0,b.jsxs)("div",{className:"card-content",children:[(0,b.jsx)("h3",{className:"card-title",children:f.title}),(0,b.jsxs)("div",{className:"card-meta",children:[(0,b.jsxs)("span",{className:"meta-item",children:[(0,b.jsx)("span",{className:"meta-icon",children:"ðŸ‘¤"}),f.author.name]}),(0,b.jsxs)("span",{className:"meta-item",children:[(0,b.jsx)("span",{className:"meta-icon",children:"ðŸ“"}),f.category]})]})]}),(0,b.jsxs)("div",{className:"card-stats",children:[(0,b.jsxs)("div",{className:"stat-item",children:[(0,b.jsx)("span",{className:"stat-icon",children:"ðŸ‘ï¸"}),(0,b.jsx)("span",{className:"stat-value",children:f.stats.views.toLocaleString()})]}),(0,b.jsxs)("div",{className:"stat-item",children:[(0,b.jsx)("span",{className:"stat-icon",children:"ðŸ’¬"}),(0,b.jsx)("span",{className:"stat-value",children:f.stats.comments})]}),(0,b.jsxs)("div",{className:"stat-item",children:[(0,b.jsx)("span",{className:"stat-icon",children:"â¤ï¸"}),(0,b.jsx)("span",{className:"stat-value",children:f.stats.likes})]})]})]});if("author"===c){let c=f.xp||0,d=(0,e.getUserBadge)(c);return(0,b.jsxs)("div",{className:"leaderboard-card",children:[(0,b.jsx)("div",{className:"rank-badge",children:g(a)}),(0,b.jsx)("div",{className:"card-content",children:(0,b.jsxs)("div",{className:"author-header",children:[(0,b.jsx)("span",{className:"author-avatar",children:f.photoURL?(0,b.jsx)("img",{src:f.photoURL,alt:f.displayName}):"ðŸ‘¤"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"card-title",children:f.displayName}),d&&(0,b.jsxs)("span",{className:"author-badge",children:[d.emoji," ",d.name]})]})]})}),(0,b.jsx)("div",{className:"card-stats",children:(0,b.jsxs)("div",{className:"stat-item",children:[(0,b.jsx)("span",{className:"stat-icon",children:"âœ¨"}),(0,b.jsx)("span",{className:"stat-value",children:c.toLocaleString()}),(0,b.jsx)("span",{className:"stat-label",children:"XP"})]})})]})}if("badge"===c){let c=f.xp||0,d=(0,e.getUserBadge)(c);return(0,b.jsxs)("div",{className:"leaderboard-card",children:[(0,b.jsx)("div",{className:"rank-badge",children:g(a)}),(0,b.jsx)("div",{className:"card-content",children:(0,b.jsxs)("div",{className:"author-header",children:[(0,b.jsx)("span",{className:"author-avatar",children:f.photoURL?(0,b.jsx)("img",{src:f.photoURL,alt:f.displayName}):"ðŸ‘¤"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"card-title",children:f.displayName}),d&&(0,b.jsxs)("span",{className:"author-badge badge-highlight",children:[d.emoji," ",d.name]})]})]})}),(0,b.jsx)("div",{className:"card-stats",children:(0,b.jsxs)("div",{className:"stat-item",children:[(0,b.jsx)("span",{className:"stat-icon",children:"âœ¨"}),(0,b.jsx)("span",{className:"stat-value",children:c.toLocaleString()}),(0,b.jsx)("span",{className:"stat-label",children:"Toplam XP"})]})})]})}return null}a.i(69387);var g=a.i(60574),h=a.i(79353);async function i(a="all",b=10){try{let c=(0,g.collection)(h.db,"stories"),d=(0,g.query)(c,(0,g.orderBy)("createdAt","desc")),e=(await (0,g.getDocs)(d)).docs.map(a=>{let b=a.data();return{id:a.id,...b,createdAt:b.createdAt?.toDate()||new Date}});if("all"!==a){let b,c=new Date;switch(a){case"today":b=new Date(c.getFullYear(),c.getMonth(),c.getDate());break;case"week":b=new Date(c.getTime()-6048e5);break;case"month":b=new Date(c.getFullYear(),c.getMonth(),1);break;default:b=new Date(0)}e=e.filter(a=>a.createdAt>=b)}return e.sort((a,b)=>(b.stats?.views||0)-(a.stats?.views||0)).slice(0,b).map((a,b)=>({...a,rank:b+1}))}catch(a){return console.error("Error fetching top stories:",a),[]}}async function j(a=10){try{let b=(0,g.collection)(h.db,"users"),c=(0,g.query)(b,(0,g.orderBy)("totalWins","desc"),(0,g.limit)(a));return(await (0,g.getDocs)(c)).docs.map((a,b)=>{let c=a.data();return{uid:a.id,displayName:c.displayName||"Anonim",photoURL:c.photoURL||null,totalViews:c.totalViews||0,storiesCount:c.storiesCount||0,currentBadge:c.currentBadge||"ðŸŒ±",rank:b+1}})}catch(a){return console.error("Error fetching top authors:",a),[]}}async function k(a=10){try{let b=(0,g.collection)(h.db,"users"),c=(0,g.query)(b,(0,g.orderBy)("totalWins","desc"),(0,g.limit)(a));return(await (0,g.getDocs)(c)).docs.map((a,b)=>{let c=a.data();return{uid:a.id,email:c.email||"",displayName:c.displayName||"Anonim",photoURL:c.photoURL||null,totalWins:c.totalWins||0,currentBadge:c.currentBadge||"ðŸŒ±",createdAt:c.createdAt||g.Timestamp.now(),lastUpdated:c.lastUpdated||g.Timestamp.now(),rank:b+1}})}catch(a){return console.error("Error fetching top badge holders:",a),[]}}function l(){let[a,d]=(0,c.useState)("stories"),[e,g]=(0,c.useState)("all"),[h,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]);(0,c.useEffect)(()=>{s()},[a,e]);let s=async()=>{l(!0);try{if("stories"===a){let a=await i(e,10);n(a)}else if("authors"===a){let a=await j(10);p(a)}else if("badges"===a){let a=await k(10);r(a)}}catch(a){console.error("Error fetching leaderboard data:",a)}finally{l(!1)}};return(0,b.jsx)("div",{className:"leaderboard-page",children:(0,b.jsxs)("div",{className:"leaderboard-container",children:[(0,b.jsxs)("div",{className:"leaderboard-header",children:[(0,b.jsxs)("h1",{className:"page-title",children:[(0,b.jsx)("span",{className:"title-icon",children:"ðŸ†"}),"Liderlik Tablosu"]}),(0,b.jsx)("p",{className:"page-subtitle",children:"En baÅŸarÄ±lÄ± hikayeler, yazarlar ve rozet sahipleri"})]}),(0,b.jsxs)("div",{className:"leaderboard-tabs",children:[(0,b.jsxs)("button",{className:`tab-button ${"stories"===a?"active":""}`,onClick:()=>d("stories"),children:[(0,b.jsx)("span",{className:"tab-icon",children:"ðŸ“–"}),"En Ã‡ok Okunan"]}),(0,b.jsxs)("button",{className:`tab-button ${"authors"===a?"active":""}`,onClick:()=>d("authors"),children:[(0,b.jsx)("span",{className:"tab-icon",children:"âœï¸"}),"Aktif Yazarlar"]}),(0,b.jsxs)("button",{className:`tab-button ${"badges"===a?"active":""}`,onClick:()=>d("badges"),children:[(0,b.jsx)("span",{className:"tab-icon",children:"ðŸŽ–ï¸"}),"Rozet SÄ±ralamasÄ±"]})]}),"stories"===a&&(0,b.jsxs)("div",{className:"time-filters",children:[(0,b.jsx)("button",{className:`filter-button ${"today"===e?"active":""}`,onClick:()=>g("today"),children:"BugÃ¼n"}),(0,b.jsx)("button",{className:`filter-button ${"week"===e?"active":""}`,onClick:()=>g("week"),children:"Bu Hafta"}),(0,b.jsx)("button",{className:`filter-button ${"month"===e?"active":""}`,onClick:()=>g("month"),children:"Bu Ay"}),(0,b.jsx)("button",{className:`filter-button ${"all"===e?"active":""}`,onClick:()=>g("all"),children:"TÃ¼m Zamanlar"})]}),(0,b.jsx)("div",{className:"leaderboard-content",children:h?(0,b.jsxs)("div",{className:"loading-state",children:[(0,b.jsx)("div",{className:"spinner"}),(0,b.jsx)("p",{children:"Liderlik tablosu yÃ¼kleniyor..."})]}):"stories"===a?0===m.length?(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("span",{className:"empty-icon",children:"ðŸ“š"}),(0,b.jsx)("p",{children:"HenÃ¼z hikaye yok."})]}):m.map(a=>(0,b.jsx)(f,{rank:a.rank,type:"story",data:a},a.id)):"authors"===a?0===o.length?(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("span",{className:"empty-icon",children:"ðŸ‘¥"}),(0,b.jsx)("p",{children:"HenÃ¼z yazar yok."})]}):o.map(a=>(0,b.jsx)(f,{rank:a.rank,type:"author",data:a},a.uid)):"badges"===a?0===q.length?(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("span",{className:"empty-icon",children:"ðŸ†"}),(0,b.jsx)("p",{children:"HenÃ¼z rozet sahibi yok."})]}):q.map(a=>(0,b.jsx)(f,{rank:a.rank,type:"badge",data:a},a.uid)):void 0})]})})}a.s(["default",()=>l],16588)}];

//# sourceMappingURL=src_app_leaderboard_page_tsx_deae5a5a._.js.map