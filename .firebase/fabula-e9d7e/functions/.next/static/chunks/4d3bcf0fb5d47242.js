(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26633,e=>{"use strict";e.i(36180);var t=e.i(98925),r=e.i(53699);let a=(0,t.collection)(r.db,"stories"),s=(0,t.collection)(r.db,"comments");async function i(){console.warn("âš ï¸ getStories() is deprecated. Use getStoriesPaginated() for better performance.");try{let e=(0,t.query)(a,(0,t.orderBy)("createdAt","desc"));return(await (0,t.getDocs)(e)).docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:t.createdAt?.toDate()||new Date}})}catch(e){return console.error("Error fetching stories:",e),[]}}async function o(e){try{let a=(0,t.doc)(r.db,"stories",e),s=await (0,t.getDoc)(a);if(!s.exists())return null;let i=s.data();return{id:s.id,...i,createdAt:i.createdAt?.toDate()||new Date}}catch(e){return console.error("Error fetching story:",e),null}}async function n(e){try{let r=(0,t.query)(s,(0,t.where)("storyId","==",e),(0,t.orderBy)("createdAt","desc")),a=(await (0,t.getDocs)(r)).docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:t.createdAt?.toDate()||new Date}});return l(a)}catch(e){return console.error("Error fetching comments:",e),[]}}function l(e){let t=new Map,r=[];return e.forEach(e=>{t.set(e.id,{...e,replies:[]})}),e.forEach(e=>{let a=t.get(e.id);a&&r.push(a)}),r}async function c(e){try{return(await (0,t.addDoc)(s,{...e,createdAt:t.Timestamp.now()})).id}catch(e){throw console.error("Error adding comment:",e),e}}async function d(e){try{return(await (0,t.addDoc)(a,{...e,createdAt:t.Timestamp.now()})).id}catch(e){throw console.error("Error adding story:",e),e}}async function u(e){try{let a=(0,t.doc)(r.db,"stories",e);await (0,t.runTransaction)(r.db,async e=>{if(!(await e.get(a)).exists())throw Error("Story does not exist!");e.update(a,{"stats.views":(0,t.increment)(1)})})}catch(e){console.error("Error incrementing story views:",e)}}async function m(e,a){try{let s=(0,t.doc)(r.db,"stories",e);await (0,t.updateDoc)(s,{...a,updatedAt:t.Timestamp.now()})}catch(e){throw console.error("Error updating story:",e),e}}async function y(e){try{let a=(0,t.doc)(r.db,"stories",e);await (0,t.deleteDoc)(a)}catch(e){throw console.error("Error deleting story:",e),e}}function h(e,r){let s=r?(0,t.query)(a,(0,t.orderBy)("createdAt","desc"),(0,t.limit)(r)):(0,t.query)(a,(0,t.orderBy)("createdAt","desc"));return(0,t.onSnapshot)(s,t=>{e(t.docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:t.createdAt?.toDate()||new Date}}))},e=>{console.error("Error in stories subscription:",e)})}function g(e,a){let s=(0,t.doc)(r.db,"stories",e);return(0,t.onSnapshot)(s,e=>{if(e.exists()){let t=e.data();a({id:e.id,...t,createdAt:t.createdAt?.toDate()||new Date})}else a(null)},e=>{console.error("Error in story subscription:",e)})}function x(e,r){let a=(0,t.query)(s,(0,t.where)("storyId","==",e),(0,t.orderBy)("createdAt","desc"));return(0,t.onSnapshot)(a,e=>{r(l(e.docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:t.createdAt?.toDate()||new Date}})))},e=>{console.error("Error in comments subscription:",e)})}async function p(e=12,r){try{let s=(0,t.query)(a,(0,t.orderBy)("createdAt","desc"),(0,t.limit)(e));r&&(s=(0,t.query)(a,(0,t.orderBy)("createdAt","desc"),(0,t.startAfter)(r),(0,t.limit)(e)));let i=await (0,t.getDocs)(s),o=i.docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:t.createdAt?.toDate()||new Date}}).filter(e=>"DELETED"!==e.status),n=i.docs[i.docs.length-1]||null;return{stories:o,lastDoc:n}}catch(e){return console.error("Error fetching paginated stories:",e),{stories:[],lastDoc:null}}}e.s(["addComment",()=>c,"addStory",()=>d,"deleteStory",()=>y,"getCommentsByStoryId",()=>n,"getStories",()=>i,"getStoriesPaginated",()=>p,"getStoryById",()=>o,"incrementStoryViews",()=>u,"subscribeToComments",()=>x,"subscribeToStories",()=>h,"subscribeToStory",()=>g,"updateStory",()=>m])},6062,74161,e=>{"use strict";var t=e.i(43476),r=e.i(932),a=e.i(71645),s=e.i(57951);function i({isOpen:e,onClose:r,targetId:i,targetType:o,targetContent:n}){let{user:l}=(0,s.useAuth)(),[c,d]=(0,a.useState)("spam"),[u,m]=(0,a.useState)(""),[y,h]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1);if(!e)return null;let p=async e=>{if(e.preventDefault(),l){h(!0);try{let e=await l.getIdToken();(await fetch("/api/report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetId:i,targetType:o,targetContent:n,reason:c,description:u,idToken:e})})).ok?(x(!0),setTimeout(()=>{r(),x(!1),m(""),d("spam")},2e3)):alert("Rapor gÃ¶nderilirken bir hata oluÅŸtu.")}catch(e){console.error("Report error:",e),alert("Bir hata oluÅŸtu.")}finally{h(!1)}}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md overflow-hidden animate-scale-in",children:g?(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)("div",{className:"text-5xl mb-4",children:"âœ…"}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Rapor GÃ¶nderildi"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Bildiriminiz iÃ§in teÅŸekkÃ¼rler. Ä°ncelenecektir."})]}):(0,t.jsxs)("form",{onSubmit:p,className:"p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Ä°Ã§eriÄŸi Raporla"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sebep"}),(0,t.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,t.jsx)("option",{value:"spam",children:"Spam / Reklam"}),(0,t.jsx)("option",{value:"harassment",children:"Taciz / ZorbalÄ±k"}),(0,t.jsx)("option",{value:"inappropriate",children:"Uygunsuz Ä°Ã§erik"}),(0,t.jsx)("option",{value:"other",children:"DiÄŸer"})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"AÃ§Ä±klama (Opsiyonel)"}),(0,t.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),className:"w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white h-24 resize-none",placeholder:"Daha fazla detay..."})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Ä°ptal"}),(0,t.jsx)("button",{type:"submit",disabled:y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:y?"GÃ¶nderiliyor...":"Raporla"})]})]})})})}function o(e){let s,o,n,l,c,d=(0,r.c)(12),{targetId:u,targetType:m,targetContent:y,className:h}=e,[g,x]=(0,a.useState)(!1);d[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>x(!0),d[0]=s):s=d[0];let p=`text-gray-400 hover:text-red-500 transition-colors ${void 0===h?"":h}`;return d[1]!==p?(o=(0,t.jsx)("button",{onClick:s,className:p,title:"Raporla",children:"ðŸš©"}),d[1]=p,d[2]=o):o=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>x(!1),d[3]=n):n=d[3],d[4]!==g||d[5]!==y||d[6]!==u||d[7]!==m?(l=(0,t.jsx)(i,{isOpen:g,onClose:n,targetId:u,targetType:m,targetContent:y}),d[4]=g,d[5]=y,d[6]=u,d[7]=m,d[8]=l):l=d[8],d[9]!==o||d[10]!==l?(c=(0,t.jsxs)(t.Fragment,{children:[o,l]}),d[9]=o,d[10]=l,d[11]=c):c=d[11],c}function n({storyId:e,className:r=""}){let{user:i}=(0,s.useAuth)(),[o,n]=(0,a.useState)(!1),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),[m,y]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),x=async()=>{if(i){u(!0);try{let e=await fetch(`/api/collections?userId=${i.uid}`),t=await e.json();t.collections&&c(t.collections)}catch(e){console.error("Error fetching collections:",e)}finally{u(!1)}}},p=async()=>{if(m.trim()&&i){g(!0);try{let e=await i.getIdToken();(await fetch("/api/collections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,idToken:e})})).ok&&(y(""),x())}catch(e){console.error("Error creating collection:",e)}finally{g(!1)}}},f=async t=>{if(!i)return;let r=t.storyIds?.includes(e);try{let a=await i.getIdToken();(await fetch(`/api/collections/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:r?"remove_story":"add_story",storyId:e,idToken:a})})).ok&&c(l.map(a=>{if(a.id===t.id){let t=r?a.storyIds.filter(t=>t!==e):[...a.storyIds||[],e];return{...a,storyIds:t}}return a}))}catch(e){console.error("Error updating collection:",e)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{i?(n(!0),x()):alert("LÃ¼tfen Ã¶nce giriÅŸ yapÄ±n.")},className:`text-gray-400 hover:text-indigo-500 transition-colors ${r}`,title:"Listeye Ekle",children:"ðŸ”–"}),o&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md overflow-hidden animate-scale-in",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-800 dark:text-white",children:"Listeye Ekle"}),(0,t.jsx)("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700",children:"âœ•"})]}),(0,t.jsx)("div",{className:"p-4 max-h-64 overflow-y-auto",children:d?(0,t.jsx)("div",{className:"text-center py-4",children:"YÃ¼kleniyor..."}):0===l.length?(0,t.jsx)("div",{className:"text-center py-4 text-gray-500",children:"HenÃ¼z listeniz yok."}):(0,t.jsx)("div",{className:"space-y-2",children:l.map(r=>{let a=r.storyIds?.includes(e);return(0,t.jsxs)("button",{onClick:()=>f(r),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all ${a?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[(0,t.jsx)("span",{className:"font-medium",children:r.name}),a&&(0,t.jsx)("span",{children:"âœ“"})]},r.id)})})}),(0,t.jsx)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-100 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:m,onChange:e=>y(e.target.value),placeholder:"Yeni liste adÄ±...",className:"flex-1 p-2 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm"}),(0,t.jsx)("button",{onClick:p,disabled:h||!m.trim(),className:"px-3 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50 text-sm font-medium",children:h?"...":"OluÅŸtur"})]})})]})})]})}e.s(["default",()=>o],6062),e.s(["default",()=>n],74161)},67277,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(57951);e.i(36180);var s=e.i(98925),i=e.i(53699);async function o(e,t){try{let r=`${e}_story_${t}`,a=(0,s.doc)(i.db,"likes",r),o=(0,s.doc)(i.db,"stories",t);return await (0,s.runTransaction)(i.db,async r=>{let i=await r.get(a);if(!(await r.get(o)).exists())throw Error("Story does not exist!");return i.exists()?(r.delete(a),r.update(o,{"stats.likes":(0,s.increment)(-1)}),!1):(r.set(a,{userId:e,targetId:t,targetType:"story",createdAt:s.Timestamp.now()}),r.update(o,{"stats.likes":(0,s.increment)(1)}),!0)})}catch(e){throw console.error("Error toggling story like:",e),e}}async function n(e,t){try{let r=`${e}_comment_${t}`,a=(0,s.doc)(i.db,"likes",r),o=(0,s.doc)(i.db,"comments",t);return await (0,s.runTransaction)(i.db,async r=>{let i=await r.get(a);if(!(await r.get(o)).exists())throw Error("Comment does not exist!");return i.exists()?(r.delete(a),r.update(o,{likes:(0,s.increment)(-1)}),!1):(r.set(a,{userId:e,targetId:t,targetType:"comment",createdAt:s.Timestamp.now()}),r.update(o,{likes:(0,s.increment)(1)}),!0)})}catch(e){throw console.error("Error toggling comment like:",e),e}}(0,s.collection)(i.db,"likes");var l=e.i(25661);function c({targetId:e,targetType:s,initialLikeCount:i,size:c="medium",storyAuthorId:d,storyTitle:u}){let{user:m}=(0,a.useAuth)(),[y,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(i),[p,f]=(0,r.useState)(!1),[b,k]=(0,r.useState)(!0),w=async()=>{if(!m||p)return;f(!0);let t=!y,r=t?g+1:g-1;h(t),x(r);try{let t="story"===s?await o(m.uid,e):await n(m.uid,e);if(h(t),t&&"story"===s&&d&&u&&d!==m.uid)try{await (0,l.createNotification)({userId:d,type:"like",actorId:m.uid,actorName:m.displayName||"KullanÄ±cÄ±",actorAvatar:m.photoURL||"ðŸ‘¤",storyId:e,storyTitle:u,message:"hikayenizi beÄŸendi"})}catch(e){console.error("Error creating notification:",e)}}catch(e){console.error("Error toggling like:",e),h(!t),x(g)}finally{f(!1)}};return b?null:(0,t.jsxs)("button",{className:`like-button ${{small:"like-button-small",medium:"like-button-medium",large:"like-button-large"}[c]} ${y?"liked":""} ${!m?"disabled":""}`,onClick:w,disabled:!m||p,title:m?y?"BeÄŸeniyi kaldÄ±r":"BeÄŸen":"BeÄŸenmek iÃ§in giriÅŸ yapÄ±n",children:[(0,t.jsx)("span",{className:"like-icon",children:y?"â¤ï¸":"ðŸ¤"}),(0,t.jsx)("span",{className:"like-count",children:g})]})}e.s(["default",()=>c],67277)},30211,e=>{"use strict";e.i(36180);var t=e.i(98925),r=e.i(53699),a=e.i(26633);let s=(0,t.collection)(r.db,"favorites");async function i(e,a){try{let s=`${e}_${a}`,i=(0,t.doc)(r.db,"favorites",s);if((await (0,t.getDoc)(i)).exists())return await (0,t.deleteDoc)(i),!1;return await (0,t.setDoc)(i,{userId:e,storyId:a,createdAt:t.Timestamp.now()}),!0}catch(e){throw console.error("Error toggling favorite:",e),e}}async function o(e,a){try{let s=`${e}_${a}`,i=(0,t.doc)(r.db,"favorites",s);return(await (0,t.getDoc)(i)).exists()}catch(e){return console.error("Error checking favorite:",e),!1}}async function n(e){try{let r=(0,t.query)(s,(0,t.where)("userId","==",e)),i=await (0,t.getDocs)(r),o=i.docs.map(e=>e.data().storyId);if(0===o.length)return[];let n=(await (0,a.getStories)()).filter(e=>o.includes(e.id)),l=new Map(i.docs.map(e=>[e.data().storyId,e.data().createdAt?.toDate()||new Date]));return n.sort((e,t)=>{let r=l.get(e.id)||new Date(0);return(l.get(t.id)||new Date(0)).getTime()-r.getTime()})}catch(e){return console.error("Error fetching user favorites:",e),[]}}e.s(["getUserFavorites",()=>n,"isFavorited",()=>o,"toggleFavorite",()=>i])},97263,e=>{"use strict";var t=e.i(43476),r=e.i(932),a=e.i(18566),s=e.i(67277),i=e.i(71645),o=e.i(57951),n=e.i(30211);function l({storyId:e,size:r="medium"}){let{user:a}=(0,o.useAuth)(),[s,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),[u,m]=(0,i.useState)(!0);(0,i.useEffect)(()=>{a?async function(){if(a)try{let t=await (0,n.isFavorited)(a.uid,e);l(t)}catch(e){console.error("Error checking favorite status:",e)}finally{m(!1)}}():m(!1)},[a,e]);let y=async t=>{if(t.stopPropagation(),!a||c)return;d(!0);let r=!s;l(r);try{let t=await (0,n.toggleFavorite)(a.uid,e);l(t)}catch(e){console.error("Error toggling favorite:",e),l(!r)}finally{d(!1)}};return u?null:(0,t.jsx)("button",{className:`favorite-button ${{small:"favorite-button-small",medium:"favorite-button-medium",large:"favorite-button-large"}[r]} ${s?"favorited":""} ${!a?"disabled":""}`,onClick:y,disabled:!a||c,title:a?s?"Favorilerden Ã§Ä±kar":"Favorilere ekle":"Favori eklemek iÃ§in giriÅŸ yapÄ±n",children:(0,t.jsx)("span",{className:"favorite-icon",children:s?"â­":"â˜†"})})}var c=e.i(6062),d=e.i(74161);function u(e){let i,o,n,u,y,h,g,x,p,f,b,k,w,v,j,N,S,A,T,E,D,I,$,C,_,z,B=(0,r.c)(67),{story:R}=e,F=(0,a.useRouter)();if(B[0]!==R.content){let e;i=(e=Math.max(1,Math.ceil(R.content.trim().split(/\s+/).filter(e=>e.length>0).length/200)))<=3?`âš¡ ${e} dk`:e<=10?`ðŸ“– ${e} dk`:`ðŸ“š ${e} dk`,B[0]=R.content,B[1]=i}else i=B[1];let O=i,L=m;B[2]!==F||B[3]!==R.id?(o=e=>{e.target.closest(".like-button")||e.target.closest("button")||F.push(`/story/${R.id}`)},B[2]=F,B[3]=R.id,B[4]=o):o=B[4];let P=o;return B[5]!==R.category?(n=(0,t.jsx)("span",{className:"category-badge",children:R.category}),B[5]=R.category,B[6]=n):n=B[6],B[7]!==O?(u=(0,t.jsx)("span",{className:"reading-time-badge",children:O}),B[7]=O,B[8]=u):u=B[8],B[9]!==R.id?(y=(0,t.jsx)(l,{storyId:R.id,size:"small"}),h=(0,t.jsx)(d.default,{storyId:R.id}),B[9]=R.id,B[10]=y,B[11]=h):(y=B[10],h=B[11]),B[12]!==R.id||B[13]!==R.title?(g=(0,t.jsx)(c.default,{targetId:R.id,targetType:"story",targetContent:R.title,className:"opacity-50 hover:opacity-100"}),B[12]=R.id,B[13]=R.title,B[14]=g):g=B[14],B[15]!==R.createdAt?(x=function(e){return e.toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})}(R.createdAt),B[15]=R.createdAt,B[16]=x):x=B[16],B[17]!==x?(p=(0,t.jsx)("span",{className:"story-date",children:x}),B[17]=x,B[18]=p):p=B[18],B[19]!==u||B[20]!==y||B[21]!==h||B[22]!==g||B[23]!==p?(f=(0,t.jsxs)("div",{className:"header-actions",children:[u,y,h,g,p]}),B[19]=u,B[20]=y,B[21]=h,B[22]=g,B[23]=p,B[24]=f):f=B[24],B[25]!==f||B[26]!==n?(b=(0,t.jsxs)("div",{className:"story-card-header",children:[n,f]}),B[25]=f,B[26]=n,B[27]=b):b=B[27],B[28]!==R.title?(k=(0,t.jsx)("h3",{className:"story-title",children:R.title}),B[28]=R.title,B[29]=k):k=B[29],B[30]!==R.excerpt?(w=(0,t.jsx)("p",{className:"story-excerpt",children:R.excerpt}),B[30]=R.excerpt,B[31]=w):w=B[31],B[32]!==R.author.avatar?(v=(0,t.jsx)("span",{className:"author-avatar",children:R.author.avatar}),B[32]=R.author.avatar,B[33]=v):v=B[33],B[34]!==R.author.name?(j=(0,t.jsx)("span",{className:"author-name",children:R.author.name}),B[34]=R.author.name,B[35]=j):j=B[35],B[36]!==v||B[37]!==j?(N=(0,t.jsxs)("div",{className:"author-info",children:[v,j]}),B[36]=v,B[37]=j,B[38]=N):N=B[38],B[39]===Symbol.for("react.memo_cache_sentinel")?(S=(0,t.jsx)("span",{className:"stat-icon",children:"ðŸ‘ï¸"}),B[39]=S):S=B[39],B[40]!==R.stats.views?(A=L(R.stats.views),B[40]=R.stats.views,B[41]=A):A=B[41],B[42]!==A?(T=(0,t.jsxs)("span",{className:"stat",children:[S,A]}),B[42]=A,B[43]=T):T=B[43],B[44]===Symbol.for("react.memo_cache_sentinel")?(E=(0,t.jsx)("span",{className:"stat-icon",children:"ðŸ’¬"}),B[44]=E):E=B[44],B[45]!==R.stats.comments?(D=L(R.stats.comments),B[45]=R.stats.comments,B[46]=D):D=B[46],B[47]!==D?(I=(0,t.jsxs)("span",{className:"stat",children:[E,D]}),B[47]=D,B[48]=I):I=B[48],B[49]!==R.authorId||B[50]!==R.id||B[51]!==R.stats.likes||B[52]!==R.title?($=(0,t.jsx)(s.default,{targetId:R.id,targetType:"story",initialLikeCount:R.stats.likes,size:"small",storyAuthorId:R.authorId,storyTitle:R.title}),B[49]=R.authorId,B[50]=R.id,B[51]=R.stats.likes,B[52]=R.title,B[53]=$):$=B[53],B[54]!==T||B[55]!==I||B[56]!==$?(C=(0,t.jsxs)("div",{className:"story-stats",children:[T,I,$]}),B[54]=T,B[55]=I,B[56]=$,B[57]=C):C=B[57],B[58]!==N||B[59]!==C?(_=(0,t.jsxs)("div",{className:"story-footer",children:[N,C]}),B[58]=N,B[59]=C,B[60]=_):_=B[60],B[61]!==P||B[62]!==b||B[63]!==k||B[64]!==w||B[65]!==_?(z=(0,t.jsxs)("div",{className:"story-card",onClick:P,children:[b,k,w,_]}),B[61]=P,B[62]=b,B[63]=k,B[64]=w,B[65]=_,B[66]=z):z=B[66],z}function m(e){return e>=1e3?`${(e/1e3).toFixed(1)}k`:e.toString()}e.s(["default",()=>u],97263)},60995,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(57951),s=e.i(97263),i=e.i(18566);function o({params:e}){let{user:o}=(0,a.useAuth)(),n=(0,i.useRouter)(),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),[m,y]=(0,r.useState)("");(0,r.useEffect)(()=>{!async function(){y((await e).id)}()},[e]),(0,r.useEffect)(()=>{m&&h()},[m]);let h=async()=>{try{let e=await fetch(`/api/collections/${m}`),t=await e.json();t.collection&&c(t.collection)}catch(e){console.error("Error fetching collection:",e)}finally{u(!1)}},g=async()=>{if(confirm("Bu listeyi silmek istediÄŸinize emin misiniz?")&&o)try{let e=await o.getIdToken();(await fetch(`/api/collections/${m}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}})).ok&&n.push("/collections")}catch(e){console.error("Error deleting collection:",e)}};if(d)return(0,t.jsx)("div",{className:"p-8 text-center",children:"YÃ¼kleniyor..."});if(!l)return(0,t.jsx)("div",{className:"p-8 text-center",children:"Liste bulunamadÄ± veya eriÅŸim izniniz yok."});let x=o?.uid===l.userId;return(0,t.jsxs)("div",{className:"collection-detail-page max-w-4xl mx-auto p-6",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:l.name}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:l.description})]}),x&&(0,t.jsx)("button",{onClick:g,className:"text-red-500 hover:text-red-700 text-sm px-3 py-1 border border-red-200 rounded-lg hover:bg-red-50 transition-colors",children:"ðŸ—‘ï¸ Sil"})]}),(0,t.jsxs)("div",{className:"mt-4 flex gap-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:[l.stories?.length||0," Hikaye"]}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsx)("span",{children:l.isPublic?"ðŸŒ Herkese AÃ§Ä±k":"ðŸ”’ Gizli"}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{children:["OluÅŸturulma: ",new Date(l.createdAt).toLocaleDateString("tr-TR")]})]})]}),(0,t.jsx)("div",{className:"stories-grid grid grid-cols-1 gap-6",children:l.stories&&l.stories.length>0?l.stories.map(e=>(0,t.jsx)(s.default,{story:e},e.id)):(0,t.jsx)("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Bu listede henÃ¼z hikaye yok."})})})]})}e.s(["default",()=>o])}]);