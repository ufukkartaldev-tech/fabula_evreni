module.exports=[61134,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(79353),d=a.i(77929);let e=(0,b.collection)(c.db,"favorites");async function f(a,d){try{let e=`${a}_${d}`,f=(0,b.doc)(c.db,"favorites",e);if((await (0,b.getDoc)(f)).exists())return await (0,b.deleteDoc)(f),!1;return await (0,b.setDoc)(f,{userId:a,storyId:d,createdAt:b.Timestamp.now()}),!0}catch(a){throw console.error("Error toggling favorite:",a),a}}async function g(a,d){try{let e=`${a}_${d}`,f=(0,b.doc)(c.db,"favorites",e);return(await (0,b.getDoc)(f)).exists()}catch(a){return console.error("Error checking favorite:",a),!1}}async function h(a){try{let c=(0,b.query)(e,(0,b.where)("userId","==",a)),f=await (0,b.getDocs)(c),g=f.docs.map(a=>a.data().storyId);if(0===g.length)return[];let h=(await (0,d.getStories)()).filter(a=>g.includes(a.id)),i=new Map(f.docs.map(a=>[a.data().storyId,a.data().createdAt?.toDate()||new Date]));return h.sort((a,b)=>{let c=i.get(a.id)||new Date(0);return(i.get(b.id)||new Date(0)).getTime()-c.getTime()})}catch(a){return console.error("Error fetching user favorites:",a),[]}}a.s(["getUserFavorites",()=>h,"isFavorited",()=>g,"toggleFavorite",()=>f])},33396,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11642);a.i(69387);var e=a.i(60574),f=a.i(79353);async function g(a,b){try{let c=`${a}_story_${b}`,d=(0,e.doc)(f.db,"likes",c),g=(0,e.doc)(f.db,"stories",b);return await (0,e.runTransaction)(f.db,async c=>{let f=await c.get(d);if(!(await c.get(g)).exists())throw Error("Story does not exist!");return f.exists()?(c.delete(d),c.update(g,{"stats.likes":(0,e.increment)(-1)}),!1):(c.set(d,{userId:a,targetId:b,targetType:"story",createdAt:e.Timestamp.now()}),c.update(g,{"stats.likes":(0,e.increment)(1)}),!0)})}catch(a){throw console.error("Error toggling story like:",a),a}}async function h(a,b){try{let c=`${a}_comment_${b}`,d=(0,e.doc)(f.db,"likes",c),g=(0,e.doc)(f.db,"comments",b);return await (0,e.runTransaction)(f.db,async c=>{let f=await c.get(d);if(!(await c.get(g)).exists())throw Error("Comment does not exist!");return f.exists()?(c.delete(d),c.update(g,{likes:(0,e.increment)(-1)}),!1):(c.set(d,{userId:a,targetId:b,targetType:"comment",createdAt:e.Timestamp.now()}),c.update(g,{likes:(0,e.increment)(1)}),!0)})}catch(a){throw console.error("Error toggling comment like:",a),a}}(0,e.collection)(f.db,"likes");var i=a.i(89769);function j({targetId:a,targetType:e,initialLikeCount:f,size:j="medium",storyAuthorId:k,storyTitle:l}){let{user:m}=(0,d.useAuth)(),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(f),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!0),v=async()=>{if(!m||r)return;s(!0);let b=!n,c=b?p+1:p-1;o(b),q(c);try{let b="story"===e?await g(m.uid,a):await h(m.uid,a);if(o(b),b&&"story"===e&&k&&l&&k!==m.uid)try{await (0,i.createNotification)({userId:k,type:"like",actorId:m.uid,actorName:m.displayName||"KullanÄ±cÄ±",actorAvatar:m.photoURL||"ðŸ‘¤",storyId:a,storyTitle:l,message:"hikayenizi beÄŸendi"})}catch(a){console.error("Error creating notification:",a)}}catch(a){console.error("Error toggling like:",a),o(!b),q(p)}finally{s(!1)}};return t?null:(0,b.jsxs)("button",{className:`like-button ${{small:"like-button-small",medium:"like-button-medium",large:"like-button-large"}[j]} ${n?"liked":""} ${!m?"disabled":""}`,onClick:v,disabled:!m||r,title:m?n?"BeÄŸeniyi kaldÄ±r":"BeÄŸen":"BeÄŸenmek iÃ§in giriÅŸ yapÄ±n",children:[(0,b.jsx)("span",{className:"like-icon",children:n?"â¤ï¸":"ðŸ¤"}),(0,b.jsx)("span",{className:"like-count",children:p})]})}a.s(["default",()=>j],33396)},59299,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(33396),e=a.i(72131),f=a.i(11642),g=a.i(61134);function h({storyId:a,size:c="medium"}){let{user:d}=(0,f.useAuth)(),[h,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)(!0);(0,e.useEffect)(()=>{d?async function(){if(d)try{let b=await (0,g.isFavorited)(d.uid,a);i(b)}catch(a){console.error("Error checking favorite status:",a)}finally{m(!1)}}():m(!1)},[d,a]);let n=async b=>{if(b.stopPropagation(),!d||j)return;k(!0);let c=!h;i(c);try{let b=await (0,g.toggleFavorite)(d.uid,a);i(b)}catch(a){console.error("Error toggling favorite:",a),i(!c)}finally{k(!1)}};return l?null:(0,b.jsx)("button",{className:`favorite-button ${{small:"favorite-button-small",medium:"favorite-button-medium",large:"favorite-button-large"}[c]} ${h?"favorited":""} ${!d?"disabled":""}`,onClick:n,disabled:!d||j,title:d?h?"Favorilerden Ã§Ä±kar":"Favorilere ekle":"Favori eklemek iÃ§in giriÅŸ yapÄ±n",children:(0,b.jsx)("span",{className:"favorite-icon",children:h?"â­":"â˜†"})})}var i=a.i(94525),j=a.i(2088);function k({story:a}){let e,f=(0,c.useRouter)(),g=(e=Math.max(1,Math.ceil(a.content.trim().split(/\s+/).filter(a=>a.length>0).length/200)))<=3?`âš¡ ${e} dk`:e<=10?`ðŸ“– ${e} dk`:`ðŸ“š ${e} dk`,k=a=>a>=1e3?`${(a/1e3).toFixed(1)}k`:a.toString();return(0,b.jsxs)("div",{className:"story-card",onClick:b=>{b.target.closest(".like-button")||b.target.closest("button")||f.push(`/story/${a.id}`)},children:[(0,b.jsxs)("div",{className:"story-card-header",children:[(0,b.jsx)("span",{className:"category-badge",children:a.category}),(0,b.jsxs)("div",{className:"header-actions",children:[(0,b.jsx)("span",{className:"reading-time-badge",children:g}),(0,b.jsx)(h,{storyId:a.id,size:"small"}),(0,b.jsx)(j.default,{storyId:a.id}),(0,b.jsx)(i.default,{targetId:a.id,targetType:"story",targetContent:a.title,className:"opacity-50 hover:opacity-100"}),(0,b.jsx)("span",{className:"story-date",children:a.createdAt.toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,b.jsx)("h3",{className:"story-title",children:a.title}),(0,b.jsx)("p",{className:"story-excerpt",children:a.excerpt}),(0,b.jsxs)("div",{className:"story-footer",children:[(0,b.jsxs)("div",{className:"author-info",children:[(0,b.jsx)("span",{className:"author-avatar",children:a.author.avatar}),(0,b.jsx)("span",{className:"author-name",children:a.author.name})]}),(0,b.jsxs)("div",{className:"story-stats",children:[(0,b.jsxs)("span",{className:"stat",children:[(0,b.jsx)("span",{className:"stat-icon",children:"ðŸ‘ï¸"}),k(a.stats.views)]}),(0,b.jsxs)("span",{className:"stat",children:[(0,b.jsx)("span",{className:"stat-icon",children:"ðŸ’¬"}),k(a.stats.comments)]}),(0,b.jsx)(d.default,{targetId:a.id,targetType:"story",initialLikeCount:a.stats.likes,size:"small",storyAuthorId:a.authorId,storyTitle:a.title})]})]})]})}a.s(["default",()=>k],59299)},597,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11642),e=a.i(61134),f=a.i(59299),g=a.i(38246);function h(){let{user:a,loading:h}=(0,d.useAuth)(),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{if(!h){if(!a)return void l(!1);b()}async function b(){if(a)try{let b=await (0,e.getUserFavorites)(a.uid);j(b)}catch(a){console.error("Error loading favorites:",a)}finally{l(!1)}}},[a,h]),h||k)?(0,b.jsx)("div",{className:"favorites-page",children:(0,b.jsx)("div",{className:"favorites-container",children:(0,b.jsxs)("div",{className:"loading-state",children:[(0,b.jsx)("div",{className:"spinner"}),(0,b.jsx)("p",{children:"Favoriler yÃ¼kleniyor..."})]})})}):a?(0,b.jsx)("div",{className:"favorites-page",children:(0,b.jsxs)("div",{className:"favorites-container",children:[(0,b.jsxs)("div",{className:"favorites-header",children:[(0,b.jsxs)("h1",{className:"page-title",children:[(0,b.jsx)("span",{className:"title-icon",children:"â­"}),"Favori Hikayelerim"]}),(0,b.jsx)("p",{className:"page-subtitle",children:"BeÄŸendiÄŸiniz ve daha sonra okumak istediÄŸiniz hikayeler"})]}),0===i.length?(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("span",{className:"empty-icon",children:"ðŸ“š"}),(0,b.jsx)("h2",{children:"HenÃ¼z favori hikaye yok"}),(0,b.jsx)("p",{children:"BeÄŸendiÄŸiniz hikayeleri favorilere ekleyerek buradan kolayca ulaÅŸabilirsiniz."}),(0,b.jsx)(g.default,{href:"/",className:"browse-button",children:"Hikayelere GÃ¶z At"})]}):(0,b.jsxs)("div",{className:"favorites-content",children:[(0,b.jsxs)("div",{className:"favorites-count",children:[i.length," favori hikaye"]}),(0,b.jsx)("div",{className:"stories-grid",children:i.map(a=>(0,b.jsx)(f.default,{story:a},a.id))})]})]})}):(0,b.jsx)("div",{className:"favorites-page",children:(0,b.jsx)("div",{className:"favorites-container",children:(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("span",{className:"empty-icon",children:"ðŸ”"}),(0,b.jsx)("h2",{children:"GiriÅŸ YapÄ±n"}),(0,b.jsx)("p",{children:"Favorilerinizi gÃ¶rmek iÃ§in giriÅŸ yapmanÄ±z gerekiyor."})]})})})}a.s(["default",()=>h])}];

//# sourceMappingURL=src_fecde2fd._.js.map